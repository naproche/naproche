\documentclass{naproche-library}
\libinput{preamble}
\begin{document}
\IfInputref{}{\setsectionlevel{section}}
\begin{smodule}[title=Computation Laws for Images and Preimages]{image-and-preimage.ftl}
\importmodule[libraries/foundations]{maps.ftl}

\begin{proposition}[forthel,id=FOUNDATIONS_07_5919649206108160]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNim{f}{X} \eq \{ f(x) \mid x \in X \}$.
\end{proposition}

\begin{corollary}[forthel,id=FOUNDATIONS_07_5543924730953728]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNim{f}{A} \eq \FUNrange(f)$.
\end{corollary}

\begin{corollary}[forthel,id=FOUNDATIONS_07_1818812171157504]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNim{f}{X} \eq \FUNrange(f \FUNrest X)$.
\end{corollary}

\begin{proposition}[forthel,id=FOUNDATIONS_07_911395830890496]
  Let $A$ be a class and $X \SETinclude A$.
  Then $\FUNim{\FUNid{A}}{X} \eq X$.
\end{proposition}

\begin{proposition}[forthel,id=FOUNDATIONS_07_3349817830932480]
  Let $B$ be a class and $Y \SETinclude B$.
  Then $\FUNpreim{\FUNid{B}}{Y} \eq Y$.
\end{proposition}

\begin{proposition}[forthel,id=FOUNDATIONS_07_6362984433582080]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$ and $a \in A$.
  Then $f(a) \in Y$ iff $a \in \FUNpreim{f}{Y}$.
\end{proposition}
\begin{proof}[forthel]
  We have $\FUNpreim{f}{Y} \eq \{ x \in A \mid f(x) \in Y \}$.
  Hence $a \in \FUNpreim{f}{Y}$ iff $a \in A$ and $f(a) \in Y$.
  Then we have the thesis.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_6730546254184448]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNim{f}{A} \SETinclude B$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNim{f}{A}
    \eq \FUNim{f}{\dom(f)}
    \eq \FUNrange(f)
    \SETinclude B$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_6541963008409600]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNpreim{f}{B} \eq A$.
\end{proposition}
\begin{proof}[forthel]
  We have $\FUNpreim{f}{B} \eq \{ a \in A \mid f(a) \in B \}$.
  $f(a) \in B$ for all $a \in A$.
  Hence the thesis.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_1913313581596672]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNim{f}{\FUNpreim{f}{B}} \eq \FUNim{f}{A}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNim{f}{\FUNpreim{f}{B}} \SETinclude \FUNim{f}{A}$.
    Let $b \in \FUNim{f}{\FUNpreim{f}{B}}$.
    Take $a \in \FUNpreim{f}{B} \SETintersect A$ such that $b \eq f(a)$.
    Then $a \in A$.
    Hence $b \in \FUNim{f}{A}$.
  End.

  Let us show that $\FUNim{f}{A} \SETinclude \FUNim{f}{\FUNpreim{f}{B}}$.
    Let $b \in \FUNim{f}{A}$.
    Take $a \in A$ such that $b \eq f(a)$.
    We have $b \in B$.
    Hence $a \in \FUNpreim{f}{B}$.
    Thus $f(a) \in \FUNim{f}{\FUNpreim{f}{B}}$.
    Indeed $\FUNpreim{f}{B} \SETinclude A$.
    Therefore $b \in \FUNim{f}{\FUNpreim{f}{B}}$.
  End.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_3819758101200896]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNpreim{f}{\FUNim{f}{A}} \eq A$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNpreim{f}{\FUNim{f}{A}} \eq \{ a \in A \mid f(a) \in \FUNim{f}{A} \}$.
  For all $a \in A$ we have $f(a) \in \FUNim{f}{A}$.
  Hence every element of $\FUNpreim{f}{\FUNim{f}{A}}$ is contained in $A$ and every element of $A$ is contained in $\FUNpreim{f}{\FUNim{f}{A}}$.
  Thus $\FUNpreim{f}{\FUNim{f}{A}} \eq A$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_7760514696347648]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$.
  Then $\FUNim{f}{\FUNpreim{f}{Y}} \eq Y \SETintersect \FUNim{f}{A}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNim{f}{\FUNpreim{f}{Y}} \SETinclude Y \SETintersect \FUNim{f}{A}$.
    Let $b \in \FUNim{f}{\FUNpreim{f}{Y}}$.
    Take $a \in \FUNpreim{f}{Y}$ such that $b \eq f(a)$.
    Then $f(a) \in Y \SETintersect \FUNim{f}{A}$.
    Hence we have $b \in Y \SETintersect \FUNim{f}{A}$.
  End.

  Let us show that $Y \SETintersect \FUNim{f}{A} \SETinclude \FUNim{f}{\FUNpreim{f}{Y}}$.
    Let $b \in Y \SETintersect \FUNim{f}{A}$.
    Take $a \in A$ such that $b \eq f(a)$.
    Then $a \in \FUNpreim{f}{Y}$.
    Hence $f(a) \in \FUNim{f}{\FUNpreim{f}{Y}}$.
  End.
\end{proof}

\begin{corollary}[forthel,id=FOUNDATIONS_07_5585105345052672]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$.
  Then $\FUNim{f}{\FUNpreim{f}{Y}} \SETinclude Y$.
\end{corollary}

\begin{proposition}[forthel,id=FOUNDATIONS_07_4890896170483712]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNpreim{f}{\FUNim{f}{X}} \supseteq X$.
\end{proposition}
\begin{proof}[forthel]
  Let $a \in X$.
  Then $f(a) \in \FUNim{f}{X}$.
  Hence $a \in \FUNpreim{f}{\FUNim{f}{X}}$.
  Indeed $\FUNim{f}{X} \SETinclude B$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_3318372355801088]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNim{f}{X} \eq \SETempty$ iff $X \eq \SETempty$.
\end{proposition}
\begin{proof}[forthel]
  \begin{case}{$\FUNim{f}{X}$ is empty.}
    Then there is no $a \in X$ such that $f(a) \in \FUNim{f}{X}$.
    For all $a \in X$ we have $f(a) \in \FUNim{f}{X}$.
    Hence $X$ is empty.
  \end{case}

  \begin{case}{$X$ is empty.}
    For all $b \in \FUNim{f}{X}$ we have $b \eq f(a)$ for some $a \in X$.
    There is no $a \in X$.
    Hence $\FUNim{f}{X}$ is empty.
  \end{case}
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_8597874786959360]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$.
  Then $\FUNpreim{f}{Y} \eq \SETempty$ iff $Y \SETinclude B \SETdiff \FUNim{f}{A}$.
\end{proposition}
\begin{proof}[forthel]
  \begin{case}{$\FUNpreim{f}{Y}$ is empty.}
    Let $b \in Y$.
    Then $b \in B$.

    There is no $a \in A$ such that $b \eq f(a)$.
    \begin{proof}
      Assume the contrary.
      Take $a \in A$ such that $b \eq f(a)$.
      Then $a \in \FUNpreim{f}{Y}$.
      Contradiction.
    \end{proof}

    Hence $b \notin \FUNim{f}{A}$.
    Therefore $b \in B \SETdiff \FUNim{f}{A}$.
  \end{case}

  \begin{case}{$Y \SETinclude B \SETdiff \FUNim{f}{A}$.}
    Then no element of $Y$ is an element of $\FUNim{f}{A}$.
    Assume that $\FUNpreim{f}{Y}$ is nonempty.
    Take $a \in \FUNpreim{f}{Y}$.
    Then $f(a) \in Y$ and $f(a) \in \FUNim{f}{A}$.
    Contradiction.
  \end{case}
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_6295504988143616]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$ and $Y \SETinclude B$.
  Then $\FUNim{f}{X} \SETintersect Y \eq \SETempty$ iff $X \SETintersect \FUNpreim{f}{Y} \eq \SETempty$.
\end{proposition}
\begin{proof}[forthel]
  \begin{case}{$\FUNim{f}{X} \SETintersect Y$ is empty.}
    Assume that $X \SETintersect \FUNpreim{f}{Y}$ is nonempty.
    Take $a \in X \SETintersect \FUNpreim{f}{Y}$.
    Then $f(a) \in \FUNim{f}{X}$ and $f(a) \in Y$.
    Hence $f(a) \in \FUNim{f}{X} \SETintersect Y$.
    Contradiction.
  \end{case}

  \begin{case}{$X \SETintersect \FUNpreim{f}{Y}$ is empty.}
    Assume that $\FUNim{f}{X} \SETintersect Y$ is nonempty.
    Take $b \in \FUNim{f}{X} \SETintersect Y$.
    Consider a $a \in X$ such that $b \eq f(a)$.
    Then $a \in \FUNpreim{f}{Y}$.
    Indeed $b \in Y$.
    Hence $a \in X \SETintersect \FUNpreim{f}{Y}$.
    Contradiction.
  \end{case}
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_5628919411638272]
  Let $A, B, C$ be classes and $f \FUNfromto{A}{B}$ and $g \FUNfromto{B}{C}$ and $X \SETinclude A$.
  Then $\FUNim{g \FUNcomp f}{X} \eq \FUNim{g}{\FUNim{f}{X}}$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNim{g \FUNcomp f}{X} \eq \{ g(f(a)) \mid a \in X \}$.
  $\FUNim{f}{X}$ is a subclass of $B$.
  We have $\FUNim{g}{\FUNim{f}{X}} \eq \{ g(b) \mid b \in \FUNim{f}{X} \}\text{ and }\FUNim{f}{X} \eq \{ f(a) \mid a \in X \}$.
  Thus $\FUNim{g}{\FUNim{f}{X}} \eq \{ g(f(a)) \mid a \in X \}$.
  Therefore $\FUNim{g \FUNcomp f}{X} \eq \FUNim{g}{\FUNim{f}{X}}$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_6824917886566400]
  Let $A, B, C$ be classes and $f \FUNfromto{A}{B}$ and $g \FUNfromto{B}{C}$ and $Z \SETinclude C$.
  Then $\FUNpreim{g \FUNcomp f}{Z} \eq \FUNpreim{f}{\FUNpreim{g}{Z}}$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNpreim{g \FUNcomp f}{Z} \eq \{ a \in A \mid g(f(a)) \in Z \}$.
  We have $\FUNpreim{g}{Z} \eq \{ b \in B \mid g(b) \in Z \}$ and $\FUNpreim{f}{\FUNpreim{g}{Z}} \eq \{ a \in A \mid f(a) \in \FUNpreim{g}{Z} \}$.
  Hence $\FUNpreim{f}{\FUNpreim{g}{Z}} \eq \{ a \in A \mid g(f(a)) \in Z \}$.
  Thus $\FUNpreim{g \FUNcomp f}{Z} \eq \FUNpreim{f}{\FUNpreim{g}{Z}}$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_7396318576115712]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  If $X \SETinclude X'$ then $\FUNim{f}{X} \SETinclude \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Assume $X \SETinclude X'$.
  Let $b \in \FUNim{f}{X}$.
  Take $a \in X$ such that $f(a) \eq b$.
  Then $a \in X'$.
  Hence $b \eq f(a) \in \FUNim{f}{X'}$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_8376448628817920]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  If $Y \SETinclude Y'$ then $\FUNpreim{f}{Y} \SETinclude \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Assume $Y \SETinclude Y'$.
  Let $a \in \FUNpreim{f}{Y}$.
  Then $f(a) \in Y$.
  Hence $f(a) \in Y'$.
  Thus $a \in \FUNpreim{f}{Y'}$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_4448961469349888]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  Then $\FUNim{f}{X \SETunion X'} \eq \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNim{f}{X \SETunion X'} \SETinclude \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.
    Let $b \in \FUNim{f}{X \SETunion X'}$.
    Take $a \in X \SETunion X'$ such that $b \eq f(a)$.
    Then $a \in X$ or $a \in X'$.
    Hence $f(a) \in \FUNim{f}{X}$ or $f(a) \in \FUNim{f}{X'}$.
    Thus $b \eq f(a) \in \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.
  End.

  Let us show that $\FUNim{f}{X} \SETunion \FUNim{f}{X'} \SETinclude \FUNim{f}{X \SETunion X'}$.
    Let $b \in \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.

    \begin{case}{$b \in \FUNim{f}{X}$.}
      Take $a \in X$ such that $b \eq f(a)$.
      Then $a \in X \SETunion X'$.
      Hence $b \in \FUNim{f}{X \SETunion X'}$.
    \end{case}

    \begin{case}{$b \in \FUNim{f}{X'}$.}
      Take $a \in X'$ such that $b \eq f(a)$.
      Then $a \in X \SETunion X'$.
      Hence $b \in \FUNim{f}{X \SETunion X'}$.
    \end{case}
  End.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_1547089051910144]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  Then $\FUNpreim{f}{Y \SETunion Y'} \eq \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNpreim{f}{Y \SETunion Y'} \SETinclude \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
    Let $a \in \FUNpreim{f}{Y \SETunion Y'}$.
    Then $f(a) \in Y \SETunion Y'$.
    Hence $f(a) \in Y$ or $f(a) \in Y'$.
    If $f(a) \in Y$ then $a \in \FUNpreim{f}{Y}$.
    If $f(a) \in Y'$ then $a \in \FUNpreim{f}{Y'}$.
    Thus $a \in \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
  End.

  Let us show that $\FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'} \SETinclude \FUNpreim{f}{Y \SETunion Y'}$.
    Let $a \in \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
    Then $a \in \FUNpreim{f}{Y}$ or $a \in \FUNpreim{f}{Y'}$.
    If $a \in \FUNpreim{f}{Y}$ then $f(a) \in Y$.
    If $a \in \FUNpreim{f}{Y'}$ then $f(a) \in Y'$.
    Hence $f(a) \in Y \SETunion Y'$.
    Thus $a \in \FUNpreim{f}{Y \SETunion Y'}$.
  End.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_3966130473402368]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  Then $\FUNim{f}{X \SETintersect X'} \SETinclude \FUNim{f}{X} \SETintersect \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Let $b \in \FUNim{f}{X \SETintersect X'}$.
  Take $a \in X \SETintersect X'$ such that $b \eq f(a)$.
  Then $a \in X$ and $a \in X'$.
  Hence $f(a) \in \FUNim{f}{X}$ and $f(a) \in \FUNim{f}{X'}$.
  Thus $b \in \FUNim{f}{X} \SETintersect \FUNim{f}{X}$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_4021844428455936]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  Then $\FUNpreim{f}{Y \SETintersect Y'} \eq \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNpreim{f}{Y \SETintersect Y'} \SETinclude \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
    Let $a \in \FUNpreim{f}{Y \SETintersect Y'}$.
    Then $f(a) \in Y \SETintersect Y'$.
    Hence $f(a) \in Y$ and $f(a) \in Y'$.
    Thus $a \in \FUNpreim{f}{Y}$ and $a \in \FUNpreim{f}{Y'}$.
    Therefore $a \in \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
  End.

  Let us show that $\FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'} \SETinclude \FUNpreim{f}{Y \SETintersect Y'}$.
    Let $a \in \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
    Then $a \in \FUNpreim{f}{Y}$ and $a \in \FUNpreim{f}{Y'}$.
    Hence $f(a) \in Y$ and $f(a) \in Y'$.
    Thus $f(a) \in Y \SETintersect Y'$.
    Therefore $a \in \FUNpreim{f}{Y \SETintersect Y'}$.
  End.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_8372256617005056]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  Then $\FUNim{f}{X \SETdiff X'} \supseteq \FUNim{f}{X} \SETdiff \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Let $b \in \FUNim{f}{X} \SETdiff \FUNim{f}{X'}$.
  Then $b \in \FUNim{f}{X}$ and $b \notin \FUNim{f}{X'}$.
  Take $a \in X$ such that $b \eq f(a)$.
  If $a \in X'$ then $b \in \FUNim{f}{X'}$.
  Hence $a \notin X'$.
  Thus $a \in X \SETdiff X'$.
  Therefore $b \eq f(a) \in \FUNim{f}{X \SETdiff X'}$.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_07_6552168641331200]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  Then $\FUNpreim{f}{Y \SETdiff Y'} \eq \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNpreim{f}{Y \SETdiff Y'} \SETinclude \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
    Let $a \in \FUNpreim{f}{Y \SETdiff Y'}$.
    Then $f(a) \in Y \SETdiff Y'$.
    Hence $f(a) \in Y$ and $f(a) \notin Y'$.
    Thus $a \in \FUNpreim{f}{Y}$ and $a \notin \FUNpreim{f}{Y'}$.
    Therefore $a \in \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
  End.

  Let us show that $\FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'} \SETinclude \FUNpreim{f}{Y \SETdiff Y'}$.
    Let $a \in \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
    Then $a \in \FUNpreim{f}{Y}$ and $a \notin \FUNpreim{f}{Y'}$.
    Hence $f(a) \in Y$ and $f(a) \notin Y'$.
    Thus $f(a) \in Y \SETdiff Y'$.
    Therefore $a \in \FUNpreim{f}{Y \SETdiff Y'}$.
  End.
\end{proof}
\end{smodule}
\end{document}
