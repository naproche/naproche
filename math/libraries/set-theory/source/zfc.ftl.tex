\documentclass{naproche-library}
\libinput{preamble}
\begin{document}
\IfInputref{}{\setsectionlevel{section}}
\begin{smodule}[title=ZFC]{zfc.ftl}
\importmodule[libraries/set-theory]{axioms?set-existence.ftl}
\importmodule[libraries/set-theory]{axioms?separation.ftl}
\importmodule[libraries/set-theory]{axioms?pairing.ftl}
\importmodule[libraries/set-theory]{axioms?union.ftl}
\importmodule[libraries/set-theory]{axioms?powerset.ftl}
\importmodule[libraries/set-theory]{axioms?infinity.ftl}
\importmodule[libraries/set-theory]{axioms?replacement.ftl}
\importmodule[libraries/set-theory]{axioms?foundation.ftl}
\importmodule[libraries/set-theory]{axioms?function.ftl}
\importmodule[libraries/set-theory]{axioms?choice.ftl}
\importmodule[libraries/foundations]{pairs-and-products.ftl}
\importmodule[libraries/foundations]{invertible-maps.ftl}

\begin{proposition}[forthel,id=FOUNDATIONS_10_5891530432708608]
  $\emptyset$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Take a set $x$ (by \printref{FOUNDATIONS_10_2362039748001792}).
  Define $A = \{ y \in x \mid y \neq y \}$.
  Then $A$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
  We have $A \eq \emptyset$.
  Hence $\emptyset$ is a set.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4052198354845696]
  Let $x, y$ be sets.
  Then $x \SETunion y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Take $X \eq \SETpair{x}{y}$.
  Then $X$ is a set.
  Hence $\SETunionover X$ is a set (by \printref{FOUNDATIONS_10_5536459412996096}).
  Indeed $X$ is a system of sets.
  We have $x \SETunion y \eq \SETunionover X$.
  Thus $x \SETunion y$ is a set.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4475839687163904]
  Let $x, y$ be sets.
  Then $x \SETintersect y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  We have $x \SETintersect y \SETinclude x$.
  Hence $x \SETintersect y$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_7795203882614784]
  Let $x, y$ be sets.
  Then $x \SETdiff y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  We have $x \SETdiff y \SETinclude x$.
  Hence $x \SETdiff y$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4458706448154624]
  Let $x, y$ be sets.
  Then $x \SETprod y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  $\SETsingleton{a}$ and $\SETpair{a}{b}$ are sets for each $a \in x$ and each $b \in y$.
  Define $P = \{ \SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \mid a \in x$ and $b \in y \}$.

  (1) $P$ is a set. \newline
  Proof.
    Let us show that $P \SETinclude \SETpow(\SETpow(x \SETunion y))$.
      Let $p \in P$.
      Consider $a \in x$ and $b \in y$ such that $p \eq \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$.
      Then $a, b \in x \SETunion y$.
      Hence $\SETsingleton{a}, \SETpair{a}{b} \in \SETpow(x \SETunion y)$.
      Thus $\SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \in \SETpow(\SETpow(x \SETunion y))$.
    End.

    $x \SETunion y$ is a set.
    Consequently $\SETpow(\SETpow(x \SETunion y))$ is a set (by \printref{FOUNDATIONS_10_5862230203564032}).
    Therefore $P$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
  Qed.

  Define $l(p) =$ ``choose $a \in x$, choose $b \in y$ such that $p \eq \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$ in $a$'' for $p \in P$.
  Define $r(p) =$ ``choose $a \in x$, choose $b \in y$ such that $p \eq \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$ in $b$'' for $p \in P$.

  Define $f(p) = (l(p), r(p))$ for $p \in P$.

  Let us show that for any objects $u, u', v, v'$ if
  $\SETpair{\SETsingleton{u}}{\SETpair{u}{v}} \eq \SETpair{\SETsingleton{u'}}{\SETpair{u'}{v'}}$ then $u \eq u'$ and $v \eq v'$.
    Let $u, u', v, v'$ be objects.
    Assume $\SETpair{\SETsingleton{u}}{\SETpair{u}{v}} \eq \SETpair{\SETsingleton{u'}}{\SETpair{u'}{v'}}$.
    Then ($\SETsingleton{u} \eq \SETsingleton{u'}$ or $\SETsingleton{u} \eq \SETpair{u'}{v'}$) and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$).
    Thus ($\SETsingleton{u} \eq \SETsingleton{u'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$)) or ($\SETsingleton{u} \eq \SETpair{u'}{v'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$)).

    Case $\SETsingleton{u} \eq \SETsingleton{u'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$).
      We have $\SETsingleton{u} \eq \SETsingleton{u'}$.
      Hence $u \eq u'$.

      Case $\SETpair{u}{v} \eq \SETsingleton{u'}$.
        Then $u \eq u'\eq v$.
        Hence $\SETpair{\SETsingleton{u}}{\SETpair{u}{u}} \eq \SETpair{\SETsingleton{u}}{\SETpair{u}{v'}}$ (by 1).
        Thus $\SETsingleton{\SETsingleton{u}} \eq \SETpair{\SETsingleton{u}}{\SETpair{u}{v'}}$.
        Therefore $\SETsingleton{u} \eq \SETpair{u}{v'}$.
        Consequently $v' \eq u \eq v$.
      End.

      Case $\SETpair{u}{v} \eq \SETpair{u'}{v'}$.
        Then $\SETpair{u}{v} \eq \SETpair{u}{v'}$.
        Hence $v \eq v'$.
      End.
    End.

    Case $\SETsingleton{u} \eq \SETpair{u'}{v'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$).
      We have $\SETsingleton{u} \eq \SETpair{u'}{v'}$.
      Hence $u \eq u'$.

      Case $\SETpair{u}{v} \eq \SETsingleton{u'}$.
        Then $u \eq v \eq u'$.
        Hence $v \eq v'$.
      End.

      Case $\SETpair{u}{v} \eq \SETpair{u'}{v'}$.
        Then $\SETpair{u}{v} \eq \SETpair{u}{v'}$.
        Hence $v \eq v'$.
      End.
    End.
  End.

  $\SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \in \dom(f)$ for any $a \in x$ and any $b \in y$. \newline % Needed for ontological checking
  Proof.
    Let $a \in x$ and $b \in y$.
    Then $\SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \in P$.
  Qed.

  Let us show that for any $a \in x$ and any $b \in y$ we have $f(\SETpair{\SETsingleton{a}}{\SETpair{a}{b}}) \eq (a,b)$.
    Let $a \in x$ and $b \in y$.
    Take $p \eq \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$.
    Then $p$ is a set.
    Then we can choose $a' \in x$ and $b' \in y$ such that $p \eq \SETpair{\SETsingleton{a'}}{\SETpair{a'}{b'}}$ and $l(p) \eq a'$.
    Then $a \eq a'$ and $b \eq b'$.
    Hence $l(p) \eq a$.
    Choose $a'' \in x$ and $b'' \in y$ such that $p \eq \SETpair{\SETsingleton{a''}}{\SETpair{a''}{b''}}$ and $r(p) \eq b''$.
    Then $a \eq a''$ and $b \eq b''$.
    Thus $r(p) \eq b$.
    Therefore $f(p) \eq (a,b)$.
  End.

  (2) $x \SETprod y \eq \FUNim{f}{P}$. \newline
  Proof.
    For all $p \in P$ we have $l(p) \in x$ and $r(p) \in y$.
    Hence $f(p) \in x \SETprod y$ for all $p \in P$.
    Therefore $\FUNim{f}{P} \SETinclude x \SETprod y$.

    Let us show that $x \SETprod y \SETinclude \FUNim{f}{P}$.
      Let $z \in x \SETprod y$.
      Take $a \in x$ and $b \in y$ such that $z \eq (a,b)$.
      Then $(a,b) \eq f(\SETpair{\SETsingleton{a}}{\SETpair{a}{b}})$.
      Hence there exists a $p \in P$ such that $(a,b) \eq f(p)$.
      Thus $(a,b) \in \FUNim{f}{P}$.
    End.

    Consequently $x \SETprod y \eq \FUNim{f}{P}$.
  Qed.

  Thus $x \SETprod y$ is the image of some set under some map.
  Therefore $x \SETprod y$ is a set (by \printref{FOUNDATIONS_10_8142956584239104}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_5486815207227392]
  Let $X$ be a nonempty system of sets.
  Then $\SETintersectover X$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Take an element $x$ of $X$.
  Then $\SETintersectover X \SETinclude x$.
  Hence $\SETintersectover X$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_7598384349184000]
  Let $f$ be a map such that $\dom(f)$ is a set.
  Then $\FUNrange(f)$ is a set.
\end{proposition}
\begin{proof}[forthel]
  $\FUNrange(f) \eq \FUNim{f}{\dom(f)}$ and $\FUNim{f}{\dom(f)}$ is a set.
  Hence $\FUNrange(f)$ is a set (by \printref{FOUNDATIONS_10_8142956584239104}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_8631339572002816]
  Let $A$ be a class and $x$ be a set.
  Assume that there exists an injective map from $A$ to $x$.
  Then $A$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Consider an injective map $f$ from $A$ to $x$.
  Then $\FUNinv{f}$ is a bijection between $\FUNrange(f)$ and $A$.
  $\FUNrange(f)$ is a set and $A$ is the image of $\FUNrange(f)$ under $\FUNinv{f}$.
  Indeed $\FUNrange(f) \SETinclude x$.
  Thus $A$ is a set (by \printref{FOUNDATIONS_10_8142956584239104}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_8812282138066944]
  There exist no sets $x, y$ such that $x \in y$ and $y \in x$.
\end{proposition}
\begin{proof}[forthel]
  Assume the contrary.
  Take sets $x,y$ such that $x \in y$ and $y \in x$.
  Consider an element $z$ of $\SETpair{x}{y}$ such that $\SETpair{x}{y}$ and $z$ are disjoint (by \printref{FOUNDATIONS_10_1320008569323520}).
  Indeed $\SETpair{x}{y}$ is a nonempty system of sets.
  Then we have $z \eq x$ or $z \eq y$.

  Case $z \eq x$.
    Then $x$ and $\SETpair{x}{y}$ are disjoint.
    Hence $y \notin x$.
    Contradiction.
  End.

  Case $z \eq y$.
    Then $y$ and $\SETpair{x}{y}$ are disjoint.
    Hence $x \notin y$.
    Contradiction.
  End.
\end{proof}

\begin{corollary}[forthel,id=FOUNDATIONS_10_3086917813927936]
  Let $x$ be a set.
  Then $x \notin x$.
\end{corollary}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4589652321021547]
  Let $f, g$ be functions.
  Assume that $\dom(f) \eq \dom(g)$ and $f(a) \eq g(a)$ for all $a \in \dom(f)$.
  Then $f \eq g$.
\end{proposition}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4105036244189184]
  Let $x, y$ be sets.
  Then $\FUNfunspace{x}{y}$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Define $R = \{ F \in \SETpow(x \SETprod y) \mid$ (for all $a \in x$ there exists a $b \in y$ such that $(a,b) \in F$) and for all $a \in x$ and all $b, b' \in y$ such that $(a,b), (a,b') \in F$ we have $b \eq b' \}$.

  [prover vampire]
  Every element of $R$ is a set. % Needed for ontological checking
  Define $h(F) = \fun a \in x.$ ``choose $b \in y$ such that $(a,b) \in F$ in $b$'' for $F \in R$.
  [prover eprover]

  Let us show that $\FUNfunspace{x}{y} \SETinclude \FUNrange(h)$.
    Let $f \in \FUNfunspace{x}{y}$.
    Define $F = \{ (a,f(a)) \mid a \in x \}$.

    Then $F \in R$. \newline
    Proof.
      Define $g(a) = (a,f(a))$ for $a \in x$.
      Then $F \eq \FUNrange(g)$.
      Hence $F$ is a set.
      Thus $F \in \SETpow(x \SETprod y)$.
      Indeed $F \SETinclude x \SETprod y$.

      (1) For all $a \in x$ there exists a $b \in y$ such that $(a,b) \in F$.

      (2) For all $a \in x$ and all $b, b' \in y$ such that $(a,b),
      (a,b') \in F$ we have $b \eq b'$.

      [prover vampire]
      Hence the thesis.
      [prover eprover]
    End.

    $\dom(f) \eq \dom(h(F))$ and for each $a \in \dom(f)$ we have $h(F)(a) \eq f(a)$.
    Hence $f \eq h(F)$.
    Thus $f \in \FUNrange(h)$.
  End.

  Therefore $\FUNfunspace{x}{y}$ is a set.
  Indeed $R$ is a set.
\end{proof}
\end{smodule}
\end{document}
