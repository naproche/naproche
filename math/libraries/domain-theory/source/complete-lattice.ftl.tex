\documentclass{naproche-library}
\libinput{preamble}
\begin{document}
\IfInputref{}{\setsectionlevel{section}}
\begin{smodule}[title=Complete Lattices]{complete-lattice.ftl}
\importmodule[libraries/domain-theory]{lattice.ftl}
\STEXexport{
  \let\Join\relax
}
\begin{extstructure}{complattice}[complete lattice]{lattice}
  \symdef{Join}[op=\bigvee]{\bigvee\,}
  \symdef{Meet}[op=\bigwedge]{\bigwedge\,}
  \symdef{greatest}{\top}
  \symdef{least}{\bot}
\end{extstructure}
\vardef{Lvar}[return={\complattice[comp=##1]}]{\mathcal L}

\begin{sfragment}{Definition}
  \begin{signature}[forthel,id=CompleteLatticeSig]
    A \emph{complete lattice $\Lvar{}[univ,leq,meet,join,Meet,Join]$} is a structure with the following properties:

    \begin{itemize}
      \item \label{compLatticeSig}
        $\Lvar{}[univ,leq,meet,join]$ is a lattice.

      \item \label{compLatticeJoinSig}
        Let $A\subseteq\Lvar{univ}$.
        ${\Lvar{Join}}A$ is a join of $A$ in $\Lvar{}[univ,leq]$.

      \item \label{compLatticeMeetSig}
        Let $A\subseteq\Lvar{univ}$.
        ${\Lvar{Meet}}A$ is a meet of $A$ in $\Lvar{}[univ,leq]$.
    \end{itemize}
  \end{signature}
\end{sfragment}

\begin{sfragment}{Joins}
  \begin{convention}[forthel]
    Let $\Lvar!=\Lvar{}[univ,leq,meet,join,Meet,Join]$ denote a complete lattice.
  \end{eonvention}

  \begin{proposition}[forthel,id=JoinOfSingletonThm]
    Let $x\in\Lvar{univ}$.
    ${\Lvar{Join}}\set{x}\eq x$.
  \end{proposition}

  \begin{proposition}[forthel,id=JoinOfPairThm]
    Let $x,y\in\Lvar{univ}$.
    ${\Lvar{Join}}\set{x,y}\eq x{\Lvar{join}}y$.
  \end{proposition}
\end{sfragment}

\begin{sfragment}{Meets}
  \begin{proposition}[forthel,id=MeetOfSingletonThm]
    Let $x\in\Lvar{univ}$.
    ${\Lvar{Meet}}\set{x}\eq x$.
  \end{proposition}

  \begin{proposition}[forthel,id=MeetOfPairThm]
    Let $x,y\in\Lvar{univ}$.
    ${\Lvar{Meet}}\set{x,y}\eq x{\Lvar{meet}}y$.
  \end{proposition}
\end{sfragment}

\begin{sfragment}{Greatest Elements}
  \begin{definition}[forthel,id=CompleteLatticeGreatestDef]
    $\emph{{\Lvar{greatest}}}={\Lvar{Join}}\Lvar{univ}$.
  \end{definition}

  \begin{proposition}[forthel,id=GreatestIsMeetOfEmptystThm]
    ${\Lvar{greatest}}\eq{\Lvar{Meet}}\emptyset$.
  \end{proposition}

  \begin{proposition}[forthel,id=GreatestIsGreatestElement]
    ${\Lvar{greatest}}$ is a greatest element of $\Lvar!$.
  \end{proposition}
\end{sfragment}

\begin{sfragment}{Least Elements}
  \begin{definition}[forthel,id=CompleteLatticeLeastDef]
    $\emph{{\Lvar{least}}}={\Lvar{Join}}\emptyset$.
  \end{definition}

  \begin{proposition}[forthel,id=GreatestIsMeetOfUniverseThm]
    ${\Lvar{least}}\eq{\Lvar{Meet}}\Lvar{univ}$.
  \end{proposition}

  \begin{proposition}[forthel,id=LeastIsLeastElementThm]
    ${\Lvar{least}}$ is a least element of $\Lvar!$.
  \end{proposition}
\end{sfragment}
\end{smodule}
\end{document}
