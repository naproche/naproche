\documentclass{naproche-library}
\libinput{preamble}
\begin{document}
\begin{smodule}[title=Characterization of the Inverse Map]{characterization-of-inverse-map.ftl}

\importmodule[libraries/maps]{definitions?surjections-between-classes.ftl}
\importmodule[libraries/maps]{definitions?inverse-map.ftl}
\importmodule[libraries/maps]{definitions?comp.ftl}
\importmodule[libraries/maps]{definitions?id.ftl}

\begin{proposition}[forthel,id=CharacterizationOfInvProp]
  Let $A, B$ be classes and $f \fromonto{A}{B}$ and $g \fromonto{B}{A}$.
  Then $g$ is the inverse of $f$ iff $g \compo f \eq \id{A}$ and $f \compo g \eq \id{B}$.
\end{proposition}
\begin{proof}[forthel]
  \begin{case}{$g$ is the inverse of $f$.}
    We have
    $\dom(g \compo f)
      \eq \dom(f)
      \eq A
      \eq \dom(\id{A})$.
    For all $a \elem A$ we have
    $(g \compo f)(a)
      \eq g(f(a))
      \eq a$.
    Hence $g \compo f \eq \id{A}$.

    We have
    $\dom(f \compo g)
      \eq \dom(g)
      \eq B
      \eq \dom(\id{B})$.
    For all $b \elem B$ we have
    $(f \compo g)(b)
      \eq f(g(b))
      \eq b$.
    Hence $f \compo g \eq \id{B}$.
  \end{case}

  \begin{case}{$g \compo f \eq \id{A}$ and $f \compo g \eq \id{B}$.}
    Then $\dom(g)
      \eq B
      \eq \range(f)$
    and $\range(g)
      \eq A
      \eq \dom(f)$.
    Let $a \elem \dom(f)$ and $b \elem \dom(g)$.
    If $f(a) \eq b$ then
    $g(b)
      \eq g(f(a))
      \eq (g \compo f)(a)
      \eq \id{A}(a)
      \eq a$.
    If $g(b) \eq a$ then
    $f(a)
      \eq f(g(b))
      \eq (f \compo g)(b)
      \eq \id{B}(b)
      \eq b$.
    Hence $f(a) \eq b$ iff $g(b) \eq a$.
  \end{case}
\end{proof}

\end{smodule}
\end{document}