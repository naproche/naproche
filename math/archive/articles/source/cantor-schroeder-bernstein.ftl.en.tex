\documentclass{stex}
\libusepackage{naproche}
\libusepackage{copyright}
\libinput{preamble}

\title{The Cantor-Schröder-Bernstein Theoremin \Naproche}
\author{Alexander Holz, Marcel Schütz}
\date{2025}

\begin{document}
\begin{smodule}{cantor-schroeder-bernstein.ftl}
\maketitle

\importmodule[libraries/foundations]{equinumerosity.ftl}
\importmodule[libraries/foundations]{maps-and-systems-of-sets.ftl}
\importmodule[libraries/set-theory]{zfc.ftl}
\importmodule[articles]{knaster-tarski.ftl}

\symdecl*{Cantor-Schroeder-Bernstein}

\noindent This is a formalization of the \textit{Cantor-Schröder-Bernstein
Theorem}, i.e. of the fact that two sets are equinumerous iff they can be
embedded into each other \cite{Schroeder2012}.
Its proof of is based on the Knaster-Tarski Fixed Point Theorem.

\begin{theorem}[forthel,title=Cantor-Schröder-Bernstein,name=Cantor-Schroeder-Bernstein]
  Let $x,y$ be sets.
  $x$ and $y$ are equinumerous iff there exists a injective map from $x$ to $y$ and there exists an injective map from $y$ to $x$.
\end{theorem}
\begin{proof}[forthel]
  \begin{case}{$x$ and $y$ are equinumerous.}
    Take a bijection $f$ between $x$ and $y$.
    Then $\FUNinv{f}$ is a bijection between $y$ and $x$.
    Hence $f$ is an injective map from $x$ to $y$ and $\FUNinv{f}$ is an
    injective map from $y$ to $x$.
  \end{case}

  \begin{case}{there exists an injective map from $x$ to $y$ and there exists an injective map from $y$ to $x$.}
    Take an injective map $f$ from $x$ to $y$.
    Take an injective map $g$ from $y$ to $x$.
    We have $y \SETdiff \FUNim{f}{a} \SETinclude y$ for any $a \Elem \SETpow(x)$.

    (1) Define $h(a) = x \SETdiff \FUNim{g}{y \SETdiff \FUNim{f}{a}}$ for $a \in \SETpow(x)$.

    $h$ is a map from $\SETpow(x)$ to $\SETpow(x)$.
    Indeed $h(a)$ is a subset of $x$ for each subset $a$ of $x$.

    Let us show that $h$ preserves subsets.
      Let $u, v$ be subsets of $x$.
      Assume $u \SETinclude v$.
      Then $\FUNim{f}{u} \SETinclude \FUNim{f}{v}$.
      Hence $y \SETdiff \FUNim{f}{v} \SETinclude y \SETdiff \FUNim{f}{u}$.
      Thus $\FUNim{g}{y \SETdiff \FUNim{f}{v}} \SETinclude \FUNim{g}{y \SETdiff \FUNim{f}{u}}$.
      Indeed $y \SETdiff \FUNim{f}{v}$ and $y \SETdiff \FUNim{f}{u}$ are subsets of $y$.
      Therefore $x \SETdiff \FUNim{g}{y \SETdiff \FUNim{f}{u}} \SETinclude x \SETdiff \FUNim{g}{y \SETdiff \FUNim{f}{v}}$.
      Consequently $\FUNim{h}{u} \SETinclude \FUNim{h}{v}$.
    End.

    Hence we can take a fixed point $c$ of $h$ (by \sn{Knaster-Tarski}).

    (2) Define $F(u) = f(u)$ for $u \in c$.

    We have $c \Eq h(c)$ iff $x \SETdiff c \Eq \FUNim{g}{y \SETdiff \FUNim{f}{c}}$.
    $\FUNinv{g}$ is a bijection between $\FUNrange(g)$ and $y$.
    Thus $x \SETdiff c \Eq \FUNim{g}{y \SETdiff \FUNim{f}{c}} \SETinclude \FUNrange(g)$.
    Therefore $x \SETdiff c$ is a subset of $\Dom(\FUNinv{g})$.

    (3) Define $G(u) = \FUNinv{g}(u)$ for $u \in x \SETdiff c$.

    $F$ is a bijection between $c$ and $\FUNrange(F)$.
    $G$ is a bijection between $x \SETdiff c$ and $\FUNrange(G)$.

    Define \[ H(u) =
      \begin{cases}
        F(u) & : u \Elem c \\
        G(u) & : u \NotElem c
      \end{cases} \]
    for $u \in x$.

    Let us show that $H$ is a map to $y$.
      $\Dom(H)$ is a set and every value of $H$ is an object.
      Hence $H$ is a map.

      Let us show that every value of $H$ lies in $y$.
        Let $v$ be a value of $H$.
        Take $u \Elem x$ such that $H(u) \Eq v$.
        If $u \Elem c$ then $v \Eq H(u) \Eq F(u) \Eq f(u) \Elem y$.
        If $u \NotElem c$ then $v \Eq H(u) \Eq G(u) \Eq \FUNinv{g}(u) \Elem y$.
      End.
    End.

    (4) $H$ is surjective onto $y$.
    Indeed we can show that every element of $y$ is a value of $H$.
      Let $v \Elem y$.

      \begin{case}{$v \Elem \FUNim{f}{c}$.}
        Take $u \Elem c$ such that $f(u) \Eq v$.
        Then $F(u) \Eq v$.
      \end{case}

      \begin{case}{$v \NotElem \FUNim{f}{c}$.}
        Then $v \Elem y \SETdiff \FUNim{f}{c}$.
        Hence $g(v) \Elem \FUNim{g}{y \SETdiff \FUNim{f}{c}}$.
        Thus $g(v) \Elem x \SETdiff h(c)$.
        We have $g(v) \Elem x \SETdiff c$.
        Therefore we can take $u \Elem x \SETdiff c$ such that $G(u) \Eq v$.
        Then $v \Eq H(u)$.
      \end{case}
    End.

    (5) $H$ is injective.
    Indeed we can show that for all $u, v \Elem x$ if $u \NotEq v$ then $H(u) \NotEq H(v)$.
      Let $u,v \Elem x$.
      Assume $u \NotEq v$.

      \begin{case}{$u,v \Elem c$.}
        Then $H(u) \Eq F(u)$ and $H(v) \Eq F(v)$.
        We have $F(u) \NotEq F(v)$.
        Hence $H(u) \NotEq H(v)$.
      \end{case}

      \begin{case}{$u,v \NotElem c$.}
        Then $H(u) \Eq G(u)$ and $H(v) \Eq G(v)$.
        We have $G(u) \NotEq G(v)$.
        Hence $H(u) \NotEq H(v)$.
      \end{case}

      \begin{case}{$u \Elem c$ and $v \NotElem c$.}
        Then $H(u) \Eq F(u)$ and $H(v) \Eq G(v)$.
        Hence $v \Elem \FUNim{g}{y \SETdiff \FUNim{F}{c}}$.
        We have $G(v) \Eq \FUNinv{g}(v) \Elem y \SETdiff \FUNim{F}{c}$.
        Indeed $v \Eq g(v')$ for some $v' \Elem y \SETdiff \FUNim{F}{c}$.
        Thus $G(v) \NotEq F(u)$.
      \end{case}

      \begin{case}{$u \NotElem c$ and $v \Elem c$.}
        Then $H(u) \Eq G(u)$ and $H(v) \Eq F(v)$.
        Hence $u \Elem \FUNim{g}{y \SETdiff \FUNim{F}{c}}$.
        We have $G(u) \Eq \FUNinv{g}(u) \Elem y \SETdiff \FUNim{F}{c}$.
        Indeed $u \Eq g(u')$ for some $u' \Elem y \SETdiff \FUNim{F}{c}$.
        Thus $G(u) \NotEq F(v)$.
      \end{case}
    End.

    Consequently $H$ is a bijection between $x$ and $y$ (by 4, 5).
    Therefore $x$ and $y$ are equinumerous.
  \end{case}
\end{proof}

\printbibliography
\printlicense[CcByNcSa]{Alexander Holz (2018), Marcel Schütz (2018--2025)}
\end{smodule}
\end{document}
