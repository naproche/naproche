\documentclass{stex}
\libusepackage{naproche}
\libinput{preamble}
\begin{document}
\begin{smodule}{exponentiation.ftl}
\importmodule[libraries/arithmetics]{multiplication.ftl}
\symdef{NATexp}[args=2]{{#1}^{#2}}

\begin{sfragment}{Definition}
  \begin{signature}[forthel]
    Let $n, m$ be natural numbers.
    $\emph{\NATexp{n}{m}}$ is a natural number.
  \end{signature}

  \begin{axiom}[forthel]
    Let $n$ be a natural number.
    Then $\NATexp{n}{\NATzero} \Eq \NATone$.
  \end{axiom}

  \begin{axiom}[forthel]
    Let $n, m$ be natural numbers.
    Then $\NATexp{n}{m \NATplus \NATone} \Eq \NATexp{n}{m} \NATmul n$.
  \end{axiom}
\end{sfragment}

\begin{sfragment}{Computation Laws}
  \begin{sfragment}{Exponentiation with $0$, $1$ and $2$}
    \begin{proposition}[forthel]
      Let $n$ be a natural number.
      Assume $n \NotEq \NATzero$.
      Then $\NATexp{\NATzero}{n} \Eq \NATzero$.
    \end{proposition}
    \begin{proof}[forthel]
      Take a natural number $m$ such that $n \Eq m \NATplus \NATone$.
      Then $\NATexp{\NATzero}{n}
        \Eq \NATexp{\NATzero}{m \NATplus \NATone}
        \Eq \NATexp{\NATzero}{m} \NATmul \NATzero
        \Eq \NATzero$.
      Indeed $\NATexp{\NATzero}{m \NATplus \NATone} \Eq \NATexp{\NATzero}{m} \NATmul \NATzero$.
    \end{proof}

    \begin{proposition}[forthel]
      Let $n$ be a natural number.
      Then $\NATexp{\NATone}{n} \Eq \NATone$.
    \end{proposition}
    \begin{proof}[forthel]
      Define $\Phi = \SClass{n'}{\Nat}{\NATexp{\NATone}{n'} \Eq \NATone}$.

      (1) $\Phi$ contains $\NATzero$.

      (2) For all $n' \Elem \Phi$ we have $n' \NATplus \NATone \Elem \Phi$.
      \begin{proof}
        Let $n' \Elem \Phi$.
        Then $\NATexp{\NATone}{n' \NATplus \NATone}
          \Eq \NATexp{\NATone}{n'} \NATmul \NATone
          \Eq \NATone \NATmul \NATone
          \Eq \NATone$.
      \end{proof}

      Hence every natural number is contained in $\Phi$ (by \sr{induction I}{induction}).
      Thus $\NATexp{\NATone}{n} \Eq \NATone$.
    \end{proof}

    \begin{proposition}[forthel]
      Let $n$ be a natural number.
      Then $\NATexp{n}{\NATone} \Eq n$.
    \end{proposition}
    \begin{proof}[forthel]
      We have $\NATexp{n}{\NATone}
        \Eq \NATexp{n}{\NATzero \NATplus \NATone}
        \Eq \NATexp{n}{\NATzero} \NATmul n
        \Eq \NATone \NATmul n
        \Eq n$.
    \end{proof}

    \begin{proposition}[forthel]
      Let $n$ be a natural number.
      Then $\NATexp{n}{\NATtwo} \Eq n \NATmul n$.
    \end{proposition}
    \begin{proof}[forthel]
      We have $\NATexp{n}{\NATtwo}
        \Eq \NATexp{n}{\NATone \NATplus \NATone}
        \Eq \NATexp{n}{\NATone} \NATmul n
        \Eq n \NATmul n$.
    \end{proof}
  \end{sfragment}

  \begin{sfragment}{Sums as Exponents}
    \begin{proposition}[forthel]
      Let $n, m, k$ be natural numbers.
      Then $\NATexp{k}{n \NATplus m} \Eq \NATexp{k}{n} \NATmul \NATexp{k}{m}$.
    \end{proposition}
    \begin{proof}[forthel]
      Define $\Phi = \SClass{m'}{\Nat}{\NATexp{k}{n \NATplus m'} \Eq \NATexp{k}{n} \NATmul \NATexp{k}{m'}}$.

      (1) $\Phi$ contains $\NATzero$.
      Indeed $\NATexp{k}{n \NATplus \NATzero}
        \Eq \NATexp{k}{n}
        \Eq \NATexp{k}{n} \NATmul \NATone
        \Eq \NATexp{k}{n} \NATmul \NATexp{k}{\NATzero}$.

      (2) For all $m' \Elem \Phi$ we have $m' \NATplus \NATone \Elem \Phi$.
      \begin{proof}
        Let $m' \Elem \Phi$.
        Then
        \[  \NATexp{k}{n \NATplus (m' \NATplus \NATone)}                  \]
        \[    \Eq \NATexp{k}{(n \NATplus m') \NATplus \NATone}              \]
        \[    \Eq \NATexp{k}{n \NATplus m'} \NATmul k            \]
        \[    \Eq (\NATexp{k}{n} \NATmul \NATexp{k}{m'}) \NATmul k  \]
        \[    \Eq \NATexp{k}{n} \NATmul (\NATexp{k}{m'} \NATmul k)  \]
        \[    \Eq \NATexp{k}{n} \NATmul \NATexp{k}{m' \NATplus \NATone}.       \]
      \end{proof}

      Hence every natural number is contained in $\Phi$ (by \sr{induction I}{induction}).
      Thus $\NATexp{k}{n \NATplus m} \Eq \NATexp{k}{n} \NATmul \NATexp{k}{m}$.
    \end{proof}
  \end{sfragment}

  \begin{sfragment}{Products as Exponents}
    \begin{proposition}[forthel]
      Let $n, m, k$ be natural numbers.
      Then $\NATexp{n}{m \NATmul k} \Eq \NATexp{\NATexp{n}{m}}{k}$.
    \end{proposition}
    \begin{proof}[forthel]
      Define $\Phi = \SClass{k'}{\Nat}{\NATexp{n}{m \NATmul k'} \Eq \NATexp{\NATexp{n}{m}}{k'}}$.

      (1) $\Phi$ contains $\NATzero$.
      Indeed $\NATexp{\NATexp{n}{m}}{\NATzero}
        \Eq \NATone
        \Eq \NATexp{n}{\NATzero}
        \Eq \NATexp{n}{m \NATmul \NATzero}$.

      (2) For all $k' \Elem \Phi$ we have $k' \NATplus \NATone \Elem \Phi$.
      \begin{proof}
        Let $k' \Elem \Phi$.
        Then
        \[  \NATexp{\NATexp{n}{m}}{k' \NATplus \NATone}                \]
        \[    \Eq \NATexp{\NATexp{n}{m}}{k'} \NATmul \NATexp{n}{m}    \]
        \[    \Eq \NATexp{n}{m \NATmul k'} \NATmul \NATexp{n}{m}  \]
        \[    \Eq \NATexp{n}{(m \NATmul k') \NATplus m}        \]
        \[    \Eq \NATexp{n}{m \NATmul (k' \NATplus \NATone)}.       \]
      \end{proof}

      Therefore every natural number is contained in $\Phi$ (by \sr{induction I}{induction}).
      Consequently $\NATexp{n}{m \NATmul k} \Eq \NATexp{\NATexp{n}{m}}{k}$.
    \end{proof}
  \end{sfragment}

  \begin{sfragment}{Products as Base}
    \begin{proposition}[forthel]
      Let $n, m, k$ be natural numbers.
      Then $\NATexp{n \NATmul m}{k} \Eq \NATexp{n}{k} \NATmul \NATexp{m}{k}$.
    \end{proposition}
    \begin{proof}[forthel]
      Define $\Phi = \SClass{k'}{\Nat}{\NATexp{n \NATmul m}{k'} \Eq \NATexp{n}{k'} \NATmul \NATexp{m}{k'}}$.

      (1) $\Phi$ contains $\NATzero$.
      Indeed $(\NATexp{n \NATmul m}{\NATzero})
        \Eq \NATone
        \Eq \NATone \NATmul \NATone
        \Eq \NATexp{n}{\NATzero} \NATmul \NATexp{m}{\NATzero}$. %!

      (2) For all $k' \Elem \Phi$ we have $k' \NATplus \NATone \Elem \Phi$.
      \begin{proof}
        Let $k' \Elem \Phi$.

        Let us show that $(\NATexp{n}{k'} \NATmul \NATexp{m}{k'}) \NATmul (n \NATmul m) \Eq (\NATexp{n}{k'} \NATmul n) \NATmul (\NATexp{m}{k'} \NATmul m)$.
          \[  (\NATexp{n}{k'} \NATmul \NATexp{m}{k'}) \NATmul (n \NATmul m)       \]
          \[    \Eq ((\NATexp{n}{k'} \NATmul \NATexp{m}{k'}) \NATmul n) \NATmul m   \]
          \[    \Eq (\NATexp{n}{k'} \NATmul (\NATexp{m}{k'} \NATmul n)) \NATmul m   \]
          \[    \Eq (\NATexp{n}{k'} \NATmul (n \NATmul \NATexp{m}{k'})) \NATmul m   \]
          \[    \Eq ((\NATexp{n}{k'} \NATmul n) \NATmul \NATexp{m}{k'}) \NATmul m   \]
          \[    \Eq (\NATexp{n}{k'} \NATmul n) \NATmul (\NATexp{m}{k'} \NATmul m).  \]
        End.

        Hence
        \[  \NATexp{n \NATmul m}{k' \NATplus \NATone}                          \]
        \[    \Eq \NATexp{n \NATmul m}{k'} \NATmul (n \NATmul m)        \]
        \[    \Eq (\NATexp{n}{k'} \NATmul \NATexp{m}{k'}) \NATmul (n \NATmul m)   \]
        \[    \Eq (\NATexp{n}{k'} \NATmul n) \NATmul (\NATexp{m}{k'} \NATmul m)   \]
        \[    \Eq \NATexp{n}{k' \NATplus \NATone} \NATmul \NATexp{m}{k' \NATplus \NATone}.              \]
      \end{proof}

      Therefore every natural number is contained in $\Phi$ (by \sr{induction I}{induction}).
      Consequently $\NATexp{n \NATmul m}{k} \Eq \NATexp{n}{k} \NATmul \NATexp{m}{k}$.
    \end{proof}
  \end{sfragment}

  \begin{sfragment}{Zeroes of Exponentiation}
    \begin{proposition}[forthel]
      Let $n, m$ be natural numbers.
      Then $\NATexp{n}{m} \Eq \NATzero$ iff $n \Eq \NATzero$ and $m \NotEq \NATzero$.
    \end{proposition}
    \begin{proof}[forthel]
      \begin{case}{$\NATexp{n}{m} \Eq \NATzero$.}
        Define $\Phi = \SClass{m'}{\Nat}{\text{ if }\NATexp{n}{m'} \Eq \NATzero\text{ then }n \Eq \NATzero\text{ and }m' \NotEq \NATzero}$.

        (1) $\Phi$ contains $\NATzero$.
        Indeed if $\NATexp{n}{\NATzero} \Eq \NATzero$ then we have a contradiction.

        (2) For all $m' \Elem \Phi$ we have $m' \NATplus \NATone \Elem \Phi$.
        \begin{proof}
          Let $m' \Elem \Phi$.

          Let us show that if $\NATexp{n}{m' \NATplus \NATone} \Eq \NATzero$ then $n \Eq \NATzero$ and $m' \NATplus \NATone \NotEq \NATzero$.
            Assume $\NATexp{n}{m' \NATplus \NATone} \Eq \NATzero$.
            Then $\NATzero \Eq \NATexp{n}{m' \NATplus \NATone} \Eq \NATexp{n}{m'} \NATmul n$.
            Hence $\NATexp{n}{m'} \Eq \NATzero$ or $n \Eq \NATzero$.
            We have $m' \NATplus \NATone \NotEq \NATzero$ and if $\NATexp{n}{m'} \Eq \NATzero$ then $n \Eq \NATzero$.
            Hence $n \Eq \NATzero$ and $m' \NATplus \NATone \NotEq \NATzero$.
          End.
        \end{proof}

        Thus every natural number is contained in $\Phi$ (by \sr{induction I}{induction}).
        Consequently $m \Elem \Phi$.
        Therefore $n \Eq \NATzero$ and $m \NotEq \NATzero$.
      \end{case}

      \begin{case}{$n \Eq \NATzero$ and $m \NotEq \NATzero$.}
        Take a natural number $k$ such that $m \Eq k \NATplus \NATone$.
        Then $\NATexp{n}{m}
          \Eq \NATexp{n}{k \NATplus \NATone}
          \Eq \NATexp{n}{k} \NATmul n
          \Eq \NATexp{\NATzero}{k} \NATmul \NATzero
          \Eq \NATzero$.
      \end{case}
    \end{proof}
  \end{sfragment}
\end{sfragment}
\end{smodule}
\end{document}
