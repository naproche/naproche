\documentclass{stex}
\libusepackage{naproche}
\libinput{preamble}
\begin{document}
\begin{smodule}{zfc.ftl}
\importmodule[libraries/set-theory]{axioms?set-existence.ftl}
\importmodule[libraries/set-theory]{axioms?separation.ftl}
\importmodule[libraries/set-theory]{axioms?pairing.ftl}
\importmodule[libraries/set-theory]{axioms?union.ftl}
\importmodule[libraries/set-theory]{axioms?powerset.ftl}
\importmodule[libraries/set-theory]{axioms?infinity.ftl}
\importmodule[libraries/set-theory]{axioms?replacement.ftl}
\importmodule[libraries/set-theory]{axioms?foundation.ftl}
\importmodule[libraries/set-theory]{axioms?function.ftl}
\importmodule[libraries/set-theory]{axioms?choice.ftl}
\importmodule[libraries/foundations]{pairs-and-products.ftl}
\importmodule[libraries/foundations]{invertible-maps.ftl}

\begin{proposition}[forthel,id=FOUNDATIONS_10_5891530432708608]
  $\SETempty$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Take a set $x$ (by \printref{FOUNDATIONS_10_2362039748001792}).
  Define $A = \{ y \in x \mid y \neq y \}$.
  Then $A$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
  We have $A \eq \SETempty$.
  Hence $\SETempty$ is a set.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4052198354845696]
  Let $x, y$ be sets.
  Then $x \SETunion y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Take $X = \SETpair{x}{y}$.
  Then $X$ is a set.
  Hence $\SETunionover X$ is a set (by \printref{FOUNDATIONS_10_5536459412996096}).
  Indeed $X$ is a system of sets.
  We have $x \SETunion y \eq \SETunionover X$.
  Thus $x \SETunion y$ is a set.
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4475839687163904]
  Let $x, y$ be sets.
  Then $x \SETintersect y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  We have $x \SETintersect y \SETinclude x$.
  Hence $x \SETintersect y$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_7795203882614784]
  Let $x, y$ be sets.
  Then $x \SETdiff y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  We have $x \SETdiff y \SETinclude x$.
  Hence $x \SETdiff y$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4458706448154624]
  Let $x, y$ be sets.
  Then $x \SETprod y$ is a set.
\end{proposition}
\begin{proof}[forthel]
  $\SETsingleton{a}$ and $\SETpair{a}{b}$ are sets for each $a \SETin x$ and each $b \SETin y$.
  Define $P = \{ \SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \mid a \SETin x\text{ and }b \SETin y \}$.

  (1) $P$ is a set.
  \begin{proof}
    Let us show that $P \SETinclude \SETpow(\SETpow(x \SETunion y))$.
      Let $p \SETin P$.
      Consider $a \SETin x$ and $b \SETin y$ such that $p \eq \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$.
      Then $a, b \SETin x \SETunion y$.
      Hence $\SETsingleton{a}, \SETpair{a}{b} \SETin \SETpow(x \SETunion y)$.
      Thus $\SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \SETin \SETpow(\SETpow(x \SETunion y))$.
    End.

    $x \SETunion y$ is a set.
    Consequently $\SETpow(\SETpow(x \SETunion y))$ is a set (by \printref{FOUNDATIONS_10_5862230203564032}).
    Therefore $P$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
  \end{proof}

  Define $l(p) =$ ``choose $a \SETin x$, choose $b \SETin y$ such that $p \eq \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$ in $a$'' for $p \in P$.
  Define $r(p) =$ ``choose $a \SETin x$, choose $b \SETin y$ such that $p \eq \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$ in $b$'' for $p \in P$.

  Define $f(p) = (l(p), r(p))$ for $p \in P$.

  Let us show that for any objects $u, u', v, v'$ if
  $\SETpair{\SETsingleton{u}}{\SETpair{u}{v}} \eq \SETpair{\SETsingleton{u'}}{\SETpair{u'}{v'}}$ then $u \eq u'$ and $v \eq v'$.
    Let $u, u', v, v'$ be objects.
    Assume $\SETpair{\SETsingleton{u}}{\SETpair{u}{v}} \eq \SETpair{\SETsingleton{u'}}{\SETpair{u'}{v'}}$.
    Then ($\SETsingleton{u} \eq \SETsingleton{u'}$ or $\SETsingleton{u} \eq \SETpair{u'}{v'}$) and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$).
    Thus ($\SETsingleton{u} \eq \SETsingleton{u'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$)) or ($\SETsingleton{u} \eq \SETpair{u'}{v'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$)).

    \begin{case}{$\SETsingleton{u} \eq \SETsingleton{u'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$).}
      We have $\SETsingleton{u} \eq \SETsingleton{u'}$.
      Hence $u \eq u'$.

      \begin{case}{$\SETpair{u}{v} \eq \SETsingleton{u'}$.}
        Then $u \eq u'\eq v$.
        Hence $\SETpair{\SETsingleton{u}}{\SETpair{u}{u}} \eq \SETpair{\SETsingleton{u}}{\SETpair{u}{v'}}$ (by 1).
        Thus $\SETsingleton{\SETsingleton{u}} \eq \SETpair{\SETsingleton{u}}{\SETpair{u}{v'}}$.
        Therefore $\SETsingleton{u} \eq \SETpair{u}{v'}$.
        Consequently $v' \eq u \eq v$.
      \end{case}

      \begin{case}{$\SETpair{u}{v} \eq \SETpair{u'}{v'}$.}
        Then $\SETpair{u}{v} \eq \SETpair{u}{v'}$.
        Hence $v \eq v'$.
      \end{case}
    \end{case}

    \begin{case}{$\SETsingleton{u} \eq \SETpair{u'}{v'}$ and ($\SETpair{u}{v} \eq \SETsingleton{u'}$ or $\SETpair{u}{v} \eq \SETpair{u'}{v'}$).}
      We have $\SETsingleton{u} \eq \SETpair{u'}{v'}$.
      Hence $u \eq u'$.

      \begin{case}{$\SETpair{u}{v} \eq \SETsingleton{u'}$.}
        Then $u \eq v \eq u'$.
        Hence $v \eq v'$.
      \end{case}

      \begin{case}{$\SETpair{u}{v} \eq \SETpair{u'}{v'}$.}
        Then $\SETpair{u}{v} \eq \SETpair{u}{v'}$.
        Hence $v \eq v'$.
      \end{case}
    \end{case}
  End.

  $\SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \SETin \FUNdom(f)$ for any $a \SETin x$ and any $b \SETin y$. % Needed for ontological checking
  \begin{proof}
    Let $a \SETin x$ and $b \SETin y$.
    Then $\SETpair{\SETsingleton{a}}{\SETpair{a}{b}} \SETin P$.
  \end{proof}

  Let us show that for any $a \SETin x$ and any $b \SETin y$ we have $f(\SETpair{\SETsingleton{a}}{\SETpair{a}{b}}) \eq (a,b)$.
    Let $a \SETin x$ and $b \SETin y$.
    Take $p = \SETpair{\SETsingleton{a}}{\SETpair{a}{b}}$.
    Then $p$ is a set.
    Then we can choose $a' \SETin x$ and $b' \SETin y$ such that $p \eq \SETpair{\SETsingleton{a'}}{\SETpair{a'}{b'}}$ and $l(p) \eq a'$.
    Then $a \eq a'$ and $b \eq b'$.
    Hence $l(p) \eq a$.
    Choose $a'' \SETin x$ and $b'' \SETin y$ such that $p \eq \SETpair{\SETsingleton{a''}}{\SETpair{a''}{b''}}$ and $r(p) \eq b''$.
    Then $a \eq a''$ and $b \eq b''$.
    Thus $r(p) \eq b$.
    Therefore $f(p) \eq (a,b)$.
  End.

  (2) $x \SETprod y \eq \FUNim{f}{P}$.
  \begin{proof}
    For all $p \SETin P$ we have $l(p) \SETin x$ and $r(p) \SETin y$.
    Hence $f(p) \SETin x \SETprod y$ for all $p \SETin P$.
    Therefore $\FUNim{f}{P} \SETinclude x \SETprod y$.

    Let us show that $x \SETprod y \SETinclude \FUNim{f}{P}$.
      Let $z \SETin x \SETprod y$.
      Take $a \SETin x$ and $b \SETin y$ such that $z \eq (a,b)$.
      Then $(a,b) \eq f(\SETpair{\SETsingleton{a}}{\SETpair{a}{b}})$.
      Hence there exists a $p \SETin P$ such that $(a,b) \eq f(p)$.
      Thus $(a,b) \SETin \FUNim{f}{P}$.
    End.

    Consequently $x \SETprod y \eq \FUNim{f}{P}$.
  \end{proof}

  Thus $x \SETprod y$ is the image of some set under some map.
  Therefore $x \SETprod y$ is a set (by \printref{FOUNDATIONS_10_8142956584239104}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_5486815207227392]
  Let $X$ be a nonempty system of sets.
  Then $\SETintersectover X$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Take an element $x$ of $X$.
  Then $\SETintersectover X \SETinclude x$.
  Hence $\SETintersectover X$ is a set (by \printref{FOUNDATIONS_10_2263707272871936}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_7598384349184000]
  Let $f$ be a map such that $\FUNdom(f)$ is a set.
  Then $\FUNrange(f)$ is a set.
\end{proposition}
\begin{proof}[forthel]
  $\FUNrange(f) \eq \FUNim{f}{\FUNdom(f)}$ and $\FUNim{f}{\FUNdom(f)}$ is a set.
  Hence $\FUNrange(f)$ is a set (by \printref{FOUNDATIONS_10_8142956584239104}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_8631339572002816]
  Let $A$ be a class and $x$ be a set.
  Assume that there exists an injective map from $A$ to $x$.
  Then $A$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Consider an injective map $f$ from $A$ to $x$.
  Then $\FUNinv{f}$ is a bijection between $\FUNrange(f)$ and $A$.
  $\FUNrange(f)$ is a set and $A$ is the image of $\FUNrange(f)$ under $\FUNinv{f}$.
  Indeed $\FUNrange(f) \SETinclude x$.
  Thus $A$ is a set (by \printref{FOUNDATIONS_10_8142956584239104}).
\end{proof}

\begin{proposition}[forthel,id=FOUNDATIONS_10_8812282138066944]
  There exist no sets $x, y$ such that $x \SETin y$ and $y \SETin x$.
\end{proposition}
\begin{proof}[forthel]
  Assume the contrary.
  Take sets $x,y$ such that $x \SETin y$ and $y \SETin x$.
  Consider an element $z$ of $\SETpair{x}{y}$ such that $\SETpair{x}{y}$ and $z$ are disjoint (by \printref{FOUNDATIONS_10_1320008569323520}).
  Indeed $\SETpair{x}{y}$ is a nonempty system of sets.
  Then we have $z \eq x$ or $z \eq y$.

  \begin{case}{$z \eq x$.}
    Then $x$ and $\SETpair{x}{y}$ are disjoint.
    Hence $y \SETnotin x$.
    Contradiction.
  \end{case}

  \begin{case}{$z \eq y$.}
    Then $y$ and $\SETpair{x}{y}$ are disjoint.
    Hence $x \SETnotin y$.
    Contradiction.
  \end{case}
\end{proof}

\begin{corollary}[forthel,id=FOUNDATIONS_10_3086917813927936]
  Let $x$ be a set.
  Then $x \SETnotin x$.
\end{corollary}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4589652321021547]
  Let $f, g$ be functions.
  Assume that $\FUNdom(f) \eq \FUNdom(g)$ and $f(a) \eq g(a)$ for all $a \SETin \FUNdom(f)$.
  Then $f \eq g$.
\end{proposition}

\begin{proposition}[forthel,id=FOUNDATIONS_10_4105036244189184]
  Let $x, y$ be sets.
  Then $\FUNfunspace{x}{y}$ is a set.
\end{proposition}
\begin{proof}[forthel]
  Define $R = \{ F \in \SETpow(x \SETprod y) \mid\text{ (for all }a \SETin x\text{ there exists a }b \SETin y\text{ such that }(a,b) \SETin F\text{) and for all }a \SETin x\text{ and all }b, b' \SETin y\text{ such that }(a,b), (a,b') \SETin F\text{ we have }b \eq b' \}$.

  [prover vampire]
  Every element of $R$ is a set. % Needed for ontological checking
  Define $h(F) = \fun a \in x.$ ``choose $b \SETin y$ such that $(a,b) \SETin F$ in $b$'' for $F \in R$.
  [prover eprover]

  Let us show that $\FUNfunspace{x}{y} \SETinclude \FUNrange(h)$.
    Let $f \SETin \FUNfunspace{x}{y}$.
    Define $F = \{ (a,f(a)) \mid a \SETin x \}$.

    Then $F \SETin R$.
    \begin{proof}
      Define $g(a) = (a,f(a))$ for $a \in x$.
      Then $F \eq \FUNrange(g)$.
      Hence $F$ is a set.
      Thus $F \SETin \SETpow(x \SETprod y)$.
      Indeed $F \SETinclude x \SETprod y$.

      (1) For all $a \SETin x$ there exists a $b \SETin y$ such that $(a,b) \SETin F$.

      (2) For all $a \SETin x$ and all $b, b' \SETin y$ such that $(a,b),
      (a,b') \SETin F$ we have $b \eq b'$.

      [prover vampire]
      Hence the thesis.
      [prover eprover]
    \end{proof}

    $\FUNdom(f) \eq \FUNdom(h(F))$ and for each $a \SETin \FUNdom(f)$ we have $h(F)(a) \eq f(a)$.
    Hence $f \eq h(F)$.
    Thus $f \SETin \FUNrange(h)$.
  End.

  Therefore $\FUNfunspace{x}{y}$ is a set.
  Indeed $R$ is a set.
\end{proof}
\end{smodule}
\end{document}
