\documentclass{stex}
\libusepackage{naproche}
\libinput{preamble}
\begin{document}
\begin{smodule}{image-and-preimage.ftl}
\importmodule[libraries/foundations]{maps.ftl}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNim{f}{X} = \CClass{f(x)}{x \Elem X}$.
\end{proposition}

\begin{corollary}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNim{f}{A} \Eq \FUNrange(f)$.
\end{corollary}

\begin{corollary}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNim{f}{X} \Eq \FUNrange(f \FUNrest X)$.
\end{corollary}

\begin{proposition}[forthel]
  Let $A$ be a class and $X \SETinclude A$.
  Then $\FUNim{\FUNid{A}}{X} \Eq X$.
\end{proposition}

\begin{proposition}[forthel]
  Let $B$ be a class and $Y \SETinclude B$.
  Then $\FUNpreim{\FUNid{B}}{Y} \Eq Y$.
\end{proposition}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$ and $a \Elem A$.
  Then $f(a) \Elem Y$ iff $a \Elem \FUNpreim{f}{Y}$.
\end{proposition}
\begin{proof}[forthel]
  We have $\FUNpreim{f}{Y} = \SClass{x}{A}{f(x) \Elem Y}$.
  Hence $a \Elem \FUNpreim{f}{Y}$ iff $a \Elem A$ and $f(a) \Elem Y$.
  Then we have the thesis.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNim{f}{A} \SETinclude B$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNim{f}{A}
    \Eq \FUNim{f}{\Dom(f)}
    \Eq \FUNrange(f)
    \SETinclude B$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNpreim{f}{B} \Eq A$.
\end{proposition}
\begin{proof}[forthel]
  We have $\FUNpreim{f}{B} = \SClass{a}{A}{f(a) \Elem B}$.
  $f(a) \Elem B$ for all $a \Elem A$.
  Hence the thesis.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNim{f}{\FUNpreim{f}{B}} \Eq \FUNim{f}{A}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNim{f}{\FUNpreim{f}{B}} \SETinclude \FUNim{f}{A}$.
    Let $b \Elem \FUNim{f}{\FUNpreim{f}{B}}$.
    Take $a \Elem \FUNpreim{f}{B} \SETintersect A$ such that $b \Eq f(a)$.
    Then $a \Elem A$.
    Hence $b \Elem \FUNim{f}{A}$.
  End.

  Let us show that $\FUNim{f}{A} \SETinclude \FUNim{f}{\FUNpreim{f}{B}}$.
    Let $b \Elem \FUNim{f}{A}$.
    Take $a \Elem A$ such that $b \Eq f(a)$.
    We have $b \Elem B$.
    Hence $a \Elem \FUNpreim{f}{B}$.
    Thus $f(a) \Elem \FUNim{f}{\FUNpreim{f}{B}}$.
    Indeed $\FUNpreim{f}{B} \SETinclude A$.
    Therefore $b \Elem \FUNim{f}{\FUNpreim{f}{B}}$.
  End.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
  Then $\FUNpreim{f}{\FUNim{f}{A}} \Eq A$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNpreim{f}{\FUNim{f}{A}} = \SClass{a}{A}{f(a) \Elem \FUNim{f}{A}}$.
  For all $a \Elem A$ we have $f(a) \Elem \FUNim{f}{A}$.
  Hence every element of $\FUNpreim{f}{\FUNim{f}{A}}$ is contained in $A$ and every element of $A$ is contained in $\FUNpreim{f}{\FUNim{f}{A}}$.
  Thus $\FUNpreim{f}{\FUNim{f}{A}} \Eq A$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$.
  Then $\FUNim{f}{\FUNpreim{f}{Y}} \Eq Y \SETintersect \FUNim{f}{A}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNim{f}{\FUNpreim{f}{Y}} \SETinclude Y \SETintersect \FUNim{f}{A}$.
    Let $b \Elem \FUNim{f}{\FUNpreim{f}{Y}}$.
    Take $a \Elem \FUNpreim{f}{Y}$ such that $b \Eq f(a)$.
    Then $f(a) \Elem Y \SETintersect \FUNim{f}{A}$.
    Hence we have $b \Elem Y \SETintersect \FUNim{f}{A}$.
  End.

  Let us show that $Y \SETintersect \FUNim{f}{A} \SETinclude \FUNim{f}{\FUNpreim{f}{Y}}$.
    Let $b \Elem Y \SETintersect \FUNim{f}{A}$.
    Take $a \Elem A$ such that $b \Eq f(a)$.
    Then $a \Elem \FUNpreim{f}{Y}$.
    Hence $f(a) \Elem \FUNim{f}{\FUNpreim{f}{Y}}$.
  End.
\end{proof}

\begin{corollary}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$.
  Then $\FUNim{f}{\FUNpreim{f}{Y}} \SETinclude Y$.
\end{corollary}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNpreim{f}{\FUNim{f}{X}} \SETniclude X$.
\end{proposition}
\begin{proof}[forthel]
  Let $a \Elem X$.
  Then $f(a) \Elem \FUNim{f}{X}$.
  Hence $a \Elem \FUNpreim{f}{\FUNim{f}{X}}$.
  Indeed $\FUNim{f}{X} \SETinclude B$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
  Then $\FUNim{f}{X} \Eq \SETempty$ iff $X \Eq \SETempty$.
\end{proposition}
\begin{proof}[forthel]
  \begin{case}{$\FUNim{f}{X}$ is empty.}
    Then there is no $a \Elem X$ such that $f(a) \Elem \FUNim{f}{X}$.
    For all $a \Elem X$ we have $f(a) \Elem \FUNim{f}{X}$.
    Hence $X$ is empty.
  \end{case}

  \begin{case}{$X$ is empty.}
    For all $b \Elem \FUNim{f}{X}$ we have $b \Eq f(a)$ for some $a \Elem X$.
    There is no $a \Elem X$.
    Hence $\FUNim{f}{X}$ is empty.
  \end{case}
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y \SETinclude B$.
  Then $\FUNpreim{f}{Y} \Eq \SETempty$ iff $Y \SETinclude B \SETdiff \FUNim{f}{A}$.
\end{proposition}
\begin{proof}[forthel]
  \begin{case}{$\FUNpreim{f}{Y}$ is empty.}
    Let $b \Elem Y$.
    Then $b \Elem B$.

    There is no $a \Elem A$ such that $b \Eq f(a)$.
    \begin{proof}
      Assume the contrary.
      Take $a \Elem A$ such that $b \Eq f(a)$.
      Then $a \Elem \FUNpreim{f}{Y}$.
      Contradiction.
    \end{proof}

    Hence $b \NotElem \FUNim{f}{A}$.
    Therefore $b \Elem B \SETdiff \FUNim{f}{A}$.
  \end{case}

  \begin{case}{$Y \SETinclude B \SETdiff \FUNim{f}{A}$.}
    Then no element of $Y$ is an element of $\FUNim{f}{A}$.
    Assume that $\FUNpreim{f}{Y}$ is nonempty.
    Take $a \Elem \FUNpreim{f}{Y}$.
    Then $f(a) \Elem Y$ and $f(a) \Elem \FUNim{f}{A}$.
    Contradiction.
  \end{case}
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$ and $Y \SETinclude B$.
  Then $\FUNim{f}{X} \SETintersect Y \Eq \SETempty$ iff $X \SETintersect \FUNpreim{f}{Y} \Eq \SETempty$.
\end{proposition}
\begin{proof}[forthel]
  \begin{case}{$\FUNim{f}{X} \SETintersect Y$ is empty.}
    Assume that $X \SETintersect \FUNpreim{f}{Y}$ is nonempty.
    Take $a \Elem X \SETintersect \FUNpreim{f}{Y}$.
    Then $f(a) \Elem \FUNim{f}{X}$ and $f(a) \Elem Y$.
    Hence $f(a) \Elem \FUNim{f}{X} \SETintersect Y$.
    Contradiction.
  \end{case}

  \begin{case}{$X \SETintersect \FUNpreim{f}{Y}$ is empty.}
    Assume that $\FUNim{f}{X} \SETintersect Y$ is nonempty.
    Take $b \Elem \FUNim{f}{X} \SETintersect Y$.
    Consider a $a \Elem X$ such that $b \Eq f(a)$.
    Then $a \Elem \FUNpreim{f}{Y}$.
    Indeed $b \Elem Y$.
    Hence $a \Elem X \SETintersect \FUNpreim{f}{Y}$.
    Contradiction.
  \end{case}
\end{proof}

\begin{proposition}[forthel]
  Let $A, B, C$ be classes and $f \FUNfromto{A}{B}$ and $g \FUNfromto{B}{C}$ and $X \SETinclude A$.
  Then $\FUNim{g \FUNcomp f}{X} \Eq \FUNim{g}{\FUNim{f}{X}}$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNim{g \FUNcomp f}{X} = \CClass{g(f(a))}{a \Elem X}$.
  $\FUNim{f}{X}$ is a subclass of $B$.
  We have $\FUNim{g}{\FUNim{f}{X}} = \CClass{g(b)}{b \Elem \FUNim{f}{X}}\text{ and }\FUNim{f}{X} = \CClass{f(a)}{a \Elem X}$.
  Thus $\FUNim{g}{\FUNim{f}{X}} = \CClass{g(f(a))}{a \Elem X}$.
  Therefore $\FUNim{g \FUNcomp f}{X} \Eq \FUNim{g}{\FUNim{f}{X}}$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B, C$ be classes and $f \FUNfromto{A}{B}$ and $g \FUNfromto{B}{C}$ and $Z \SETinclude C$.
  Then $\FUNpreim{g \FUNcomp f}{Z} \Eq \FUNpreim{f}{\FUNpreim{g}{Z}}$.
\end{proposition}
\begin{proof}[forthel]
  $\FUNpreim{g \FUNcomp f}{Z} = \SClass{a}{A}{g(f(a)) \Elem Z}$.
  We have $\FUNpreim{g}{Z} = \SClass{b}{B}{g(b) \Elem Z}$ and $\FUNpreim{f}{\FUNpreim{g}{Z}} = \SClass{a}{A}{f(a) \Elem \FUNpreim{g}{Z}}$.
  Hence $\FUNpreim{f}{\FUNpreim{g}{Z}} = \SClass{a}{A}{g(f(a)) \Elem Z}$.
  Thus $\FUNpreim{g \FUNcomp f}{Z} \Eq \FUNpreim{f}{\FUNpreim{g}{Z}}$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  If $X \SETinclude X'$ then $\FUNim{f}{X} \SETinclude \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Assume $X \SETinclude X'$.
  Let $b \Elem \FUNim{f}{X}$.
  Take $a \Elem X$ such that $f(a) \Eq b$.
  Then $a \Elem X'$.
  Hence $b \Eq f(a) \Elem \FUNim{f}{X'}$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  If $Y \SETinclude Y'$ then $\FUNpreim{f}{Y} \SETinclude \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Assume $Y \SETinclude Y'$.
  Let $a \Elem \FUNpreim{f}{Y}$.
  Then $f(a) \Elem Y$.
  Hence $f(a) \Elem Y'$.
  Thus $a \Elem \FUNpreim{f}{Y'}$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  Then $\FUNim{f}{X \SETunion X'} \Eq \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNim{f}{X \SETunion X'} \SETinclude \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.
    Let $b \Elem \FUNim{f}{X \SETunion X'}$.
    Take $a \Elem X \SETunion X'$ such that $b \Eq f(a)$.
    Then $a \Elem X$ or $a \Elem X'$.
    Hence $f(a) \Elem \FUNim{f}{X}$ or $f(a) \Elem \FUNim{f}{X'}$.
    Thus $b \Eq f(a) \Elem \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.
  End.

  Let us show that $\FUNim{f}{X} \SETunion \FUNim{f}{X'} \SETinclude \FUNim{f}{X \SETunion X'}$.
    Let $b \Elem \FUNim{f}{X} \SETunion \FUNim{f}{X'}$.

    \begin{case}{$b \Elem \FUNim{f}{X}$.}
      Take $a \Elem X$ such that $b \Eq f(a)$.
      Then $a \Elem X \SETunion X'$.
      Hence $b \Elem \FUNim{f}{X \SETunion X'}$.
    \end{case}

    \begin{case}{$b \Elem \FUNim{f}{X'}$.}
      Take $a \Elem X'$ such that $b \Eq f(a)$.
      Then $a \Elem X \SETunion X'$.
      Hence $b \Elem \FUNim{f}{X \SETunion X'}$.
    \end{case}
  End.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  Then $\FUNpreim{f}{Y \SETunion Y'} \Eq \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNpreim{f}{Y \SETunion Y'} \SETinclude \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
    Let $a \Elem \FUNpreim{f}{Y \SETunion Y'}$.
    Then $f(a) \Elem Y \SETunion Y'$.
    Hence $f(a) \Elem Y$ or $f(a) \Elem Y'$.
    If $f(a) \Elem Y$ then $a \Elem \FUNpreim{f}{Y}$.
    If $f(a) \Elem Y'$ then $a \Elem \FUNpreim{f}{Y'}$.
    Thus $a \Elem \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
  End.

  Let us show that $\FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'} \SETinclude \FUNpreim{f}{Y \SETunion Y'}$.
    Let $a \Elem \FUNpreim{f}{Y} \SETunion \FUNpreim{f}{Y'}$.
    Then $a \Elem \FUNpreim{f}{Y}$ or $a \Elem \FUNpreim{f}{Y'}$.
    If $a \Elem \FUNpreim{f}{Y}$ then $f(a) \Elem Y$.
    If $a \Elem \FUNpreim{f}{Y'}$ then $f(a) \Elem Y'$.
    Hence $f(a) \Elem Y \SETunion Y'$.
    Thus $a \Elem \FUNpreim{f}{Y \SETunion Y'}$.
  End.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  Then $\FUNim{f}{X \SETintersect X'} \SETinclude \FUNim{f}{X} \SETintersect \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Let $b \Elem \FUNim{f}{X \SETintersect X'}$.
  Take $a \Elem X \SETintersect X'$ such that $b \Eq f(a)$.
  Then $a \Elem X$ and $a \Elem X'$.
  Hence $f(a) \Elem \FUNim{f}{X}$ and $f(a) \Elem \FUNim{f}{X'}$.
  Thus $b \Elem \FUNim{f}{X} \SETintersect \FUNim{f}{X}$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  Then $\FUNpreim{f}{Y \SETintersect Y'} \Eq \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNpreim{f}{Y \SETintersect Y'} \SETinclude \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
    Let $a \Elem \FUNpreim{f}{Y \SETintersect Y'}$.
    Then $f(a) \Elem Y \SETintersect Y'$.
    Hence $f(a) \Elem Y$ and $f(a) \Elem Y'$.
    Thus $a \Elem \FUNpreim{f}{Y}$ and $a \Elem \FUNpreim{f}{Y'}$.
    Therefore $a \Elem \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
  End.

  Let us show that $\FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'} \SETinclude \FUNpreim{f}{Y \SETintersect Y'}$.
    Let $a \Elem \FUNpreim{f}{Y} \SETintersect \FUNpreim{f}{Y'}$.
    Then $a \Elem \FUNpreim{f}{Y}$ and $a \Elem \FUNpreim{f}{Y'}$.
    Hence $f(a) \Elem Y$ and $f(a) \Elem Y'$.
    Thus $f(a) \Elem Y \SETintersect Y'$.
    Therefore $a \Elem \FUNpreim{f}{Y \SETintersect Y'}$.
  End.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X, X' \SETinclude A$.
  Then $\FUNim{f}{X \SETdiff X'} \SETniclude \FUNim{f}{X} \SETdiff \FUNim{f}{X'}$.
\end{proposition}
\begin{proof}[forthel]
  Let $b \Elem \FUNim{f}{X} \SETdiff \FUNim{f}{X'}$.
  Then $b \Elem \FUNim{f}{X}$ and $b \NotElem \FUNim{f}{X'}$.
  Take $a \Elem X$ such that $b \Eq f(a)$.
  If $a \Elem X'$ then $b \Elem \FUNim{f}{X'}$.
  Hence $a \NotElem X'$.
  Thus $a \Elem X \SETdiff X'$.
  Therefore $b \Eq f(a) \Elem \FUNim{f}{X \SETdiff X'}$.
\end{proof}

\begin{proposition}[forthel]
  Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $Y, Y' \SETinclude B$.
  Then $\FUNpreim{f}{Y \SETdiff Y'} \Eq \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
\end{proposition}
\begin{proof}[forthel]
  Let us show that $\FUNpreim{f}{Y \SETdiff Y'} \SETinclude \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
    Let $a \Elem \FUNpreim{f}{Y \SETdiff Y'}$.
    Then $f(a) \Elem Y \SETdiff Y'$.
    Hence $f(a) \Elem Y$ and $f(a) \NotElem Y'$.
    Thus $a \Elem \FUNpreim{f}{Y}$ and $a \NotElem \FUNpreim{f}{Y'}$.
    Therefore $a \Elem \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
  End.

  Let us show that $\FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'} \SETinclude \FUNpreim{f}{Y \SETdiff Y'}$.
    Let $a \Elem \FUNpreim{f}{Y} \SETdiff \FUNpreim{f}{Y'}$.
    Then $a \Elem \FUNpreim{f}{Y}$ and $a \NotElem \FUNpreim{f}{Y'}$.
    Hence $f(a) \Elem Y$ and $f(a) \NotElem Y'$.
    Thus $f(a) \Elem Y \SETdiff Y'$.
    Therefore $a \Elem \FUNpreim{f}{Y \SETdiff Y'}$.
  End.
\end{proof}
\end{smodule}
\end{document}
