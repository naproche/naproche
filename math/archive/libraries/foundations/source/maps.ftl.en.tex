\documentclass{stex}
\libusepackage{naproche}
\libinput{preamble}
\begin{document}
\begin{smodule}{maps.ftl}
\importmodule[libraries/foundations]{classes.ftl}
\symdef{FUNdom}{\textrm{dom}}
\symdef{FUNid}[args=1]{\comp{\textrm{id}}_{#1}}
\symdef{FUNrange}{\textrm{range}}
\symdef{FUNcomp}{\,\circ\,}
\symdef{FUNrest}{\,\restriction\,}
\symdef{FUNim}[args=2]{#1\comp[#2\comp]}
\notation{FUNim}[parens]{#1\dobrackets{#2}}
\notation{FUNim}[star]{#1_{\comp*}\dobrackets{#2}}
\symdef{FUNpreim}[args=2]{#1^{\comp{-1}}\comp[#2\comp]}
\notation{FUNpreim}[parens]{#1^{\comp{-1}}\dobrackets{#2}}
\notation{FUNpreim}[star]{#1^{\comp*}\dobrackets{#2}}
\symdef{FUNfromto}[args=2]{\mathbin{\comp:}#1\mathbin{\comp\rightarrow}#2}
\symdef{FUNfunspace}[args=2]{\comp[#1\mathbin{\comp\rightarrow}#2\comp]}

\begin{sfragment}{Domain}
  \STEXinvisible{\inlineforthel{Let $\FUNdom(f)$ stand for $\dom(f)$.}}

  \begin{convention}[forthel]
    Let the \emph{domain of $f$} stand for $\FUNdom(f)$.
    Let $f$ is \emph{defined on $X$} stand for $\FUNdom(f) = X$.
  \end{convention}
\end{sfragment}

\begin{sfragment}{Application}
  \begin{convention}[forthel]
    Let the \emph{value of $f$ at $x$} stand for $f(x)$.
    Let $\emph{f(x,y)}$ stand for $f((x,y))$.
  \end{convention}
\end{sfragment}

\begin{sfragment}{Range}
  \begin{definition}[forthel,id=FOUNDATIONS_06_4284980337311744]
    Let $f$ be a map.
    A \emph{value of $f$} is an object $b$ such that $b \eq f(a)$ for some $a \SETin \FUNdom(f)$.
  \end{definition}

  \begin{definition}[forthel,id=FOUNDATIONS_06_1938831225913344]
    Let $f$ be a map.
    $\emph{\FUNrange(f)} = \{ f(a) \mid a \SETin \FUNdom(f) \}$.

    Let the \emph{range of $f$} stand for $\FUNrange(f)$.
  \end{definition}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_6386349418479616]
    Let $f$ be a map and $b$ be an object.
    $b$ is a value of $f$ iff $b \SETin \FUNrange(f)$.
  \end{proposition}
  \begin{proof}[forthel]
    \begin{case}{$b$ is a value of $f$.}
      Take $a \SETin \FUNdom(f)$ such that $b \eq f(a)$.
      $b$ is an object.
      Hence $b \SETin \FUNrange(f)$.
    \end{case}

    \begin{case}{$b \SETin \FUNrange(f)$.}
      Then $b$ is an object such that $b \eq f(a)$ for some $a \SETin \FUNdom(f)$.
      Hence $b$ is a value of $f$.
    \end{case}
  \end{proof}
\end{sfragment}

\begin{sfragment}{Identity Map}
  \begin{definition}[forthel,id=FOUNDATIONS_06_1920902360989696]
    Let $A$ be a class.
    $\emph{\FUNid{A}}$ is the map defined on $A$ such that $\FUNid{A}(a) \eq a$ for all $a \SETin A$.

    Let the \emph{identity map on $A$} stand for $\FUNid{A}$.
  \end{definition}
\end{sfragment}

\begin{sfragment}{Composition}
  \begin{definition}[forthel,id=FOUNDATIONS_06_7605717729017856]
    Let $f, g$ be maps.
    Assume $\FUNrange(f) \SETinclude \FUNdom(g)$.
    $\emph{g \FUNcomp f}$ is the map defined on $\FUNdom(f)$ such that $(g \FUNcomp f)(a) \eq g(f(a))$ for all $a \SETin \FUNdom(f)$.

    Let the \emph{composition of $g$ and $f$} stand for $g \FUNcomp f$.
  \end{definition}
\end{sfragment}

\begin{sfragment}{Restriction}
  \begin{definition}[forthel,id=FOUNDATIONS_06_7095412741636096]
    Let $f$ be a map and $X \SETinclude \FUNdom(f)$.
    $\emph{f \FUNrest X}$ is the map defined on $X$ such that $(f \FUNrest X)(a) \eq f(a)$ for all $a \SETin X$.

    Let the \emph{restriction of $f$ to $X$} stand for $f \FUNrest X$.
  \end{definition}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_2170189258948608]
    Let $A$ be a class and $X \SETinclude A$.
    Then $\FUNid{A} \FUNrest X \eq \FUNid{X}$.
  \end{proposition}
\end{sfragment}

\begin{sfragment}{Image and Preimage}
  \begin{definition}[forthel,id=FOUNDATIONS_06_3038237683613696]
    Let $f$ be a map and $A$ be a class.
    $\emph{\FUNim{f}{A}} = \{ f(a) \mid a \SETin \FUNdom(f) \SETintersect A \}$.

    Let the \emph{image of $A$ under $f$} stand for $\FUNim{f}{A}$.
    Let the \emph{direct image of $A$ under $f$} stand for $\FUNim{f}{A}$.
  \end{definition}

  \begin{definition}[forthel,id=FOUNDATIONS_06_4563167805964288]
    Let $f$ be a map and $B$ be a class.
    $\emph{\FUNpreim{f}{B}} = \{ a \in \FUNdom(f) \mid f(a) \SETin B \}$.

    Let the \emph{preimage of $B$ under $f$} stand for $\FUNpreim{f}{B}$.
    Let the \emph{inverse image of $B$ under $f$} stand for $\FUNpreim{f}{B}$.
  \end{definition}
\end{sfragment}

\begin{sfragment}{Maps Between Classes}
  \begin{definition}[forthel,id=FOUNDATIONS_06_6934038600220672]
    Let $A$ be a class.
    A \emph{map of $A$} is a map $f$ such that $\FUNdom(f) \eq A$.

    Let a \emph{function of $A$} stand for a map of $A$ that is a function.
  \end{definition}

  \begin{definition}[forthel,id=FOUNDATIONS_06_7725375157174272]
    Let $B$ be a class.
    A \emph{map to $B$} is a map $f$ such that $f(a) \SETin B$ for each $a \SETin \FUNdom(f)$.

    Let a \emph{function to $B$} stand for a map to $B$ that is a function.
  \end{definition}

  \begin{definition}[forthel,id=FOUNDATIONS_06_2823507398361088]
    Let $A, B$ be classes.
    A \emph{map from $A$ to $B$} is a map $f$ such that $\FUNdom(f) \eq A$ and $f(a) \SETin B$ for each $a \SETin A$.

    Let $\emph{f \FUNfromto{A}{B}}$ stand for $f$ is a map from $A$ to $B$.

    Let a \emph{function from $A$ to $B$} stand for a map from $A$ to $B$ that is a function.
  \end{definition}

  \begin{definition}[forthel,id=FOUNDATIONS_06_3390734908522496]
    Let $A$ be a class.
    A \emph{map on $A$} is a map from $A$ to $A$.

    Let a \emph{function on $A$} stand for a map on $A$ that is a function.
  \end{definition}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_3312973569327104]
    Let $A, B$ be classes and $f, g \FUNfromto{A}{B}$.
    Assume that $f(a) \eq g(a)$ for all $a \SETin A$.
    Then $f \eq g$.
  \end{proposition}

  \begin{proposition}
    Let $A, B$ be classes and $f$ be a map of $A$.
    Assume that $f(a) \SETin B$ for all $a \SETin A$.
    Then $f$ is a map from $A$ to $B$ iff $\FUNrange(f) \SETinclude B$.
  \end{proposition}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_5104361690628096]
    Let $A$ be a class.
    Then $\FUNid{A}$ is a map on $A$.
  \end{proposition}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_1706446651654144]
    Let $A, B, C$ be classes and $f \FUNfromto{A}{B}$ and $g \FUNfromto{B}{C}$.
    Then $g \FUNcomp f \FUNfromto{A}{C}$.
  \end{proposition}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_4078561256275968]
    Let $A, B$ be classes and $f \FUNfromto{A}{B}$ and $X \SETinclude A$.
    Then $f \FUNrest X \FUNfromto{X}{B}$.
  \end{proposition}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_3964401904254976]
    Let $A, B$ be classes and $f \FUNfromto{A}{B}$.
    Then $f \FUNcomp \FUNid{A} \eq f \eq \FUNid{B} \FUNcomp f$.
  \end{proposition}
  \begin{proof}[forthel]
    $A$ is the domain of $f \FUNcomp \FUNid{A}$ and the domain of $f$ and the domain of $\FUNid{B} \FUNcomp f$.
    We have $(f \FUNcomp \FUNid{A})(a)
      \eq f(\FUNid{A}(a))
      \eq f(a)
      \eq \FUNid{B}(f(a))
      \eq (\FUNid{B} \FUNcomp f)(a)$
    for all $a \SETin A$.
    Hence $f \FUNcomp \FUNid{A}
      \eq f
      \eq \FUNid{B} \FUNcomp f$.
  \end{proof}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_3118771061391360]
    Let $A$ be a class and $X \SETinclude A$.
    Then $\FUNid{A} \FUNrest X \eq \FUNid{X}$.
  \end{proposition}
  \begin{proof}[forthel]
    We have $\FUNdom(\FUNid{A} \FUNrest X)
      \eq X
      \eq \FUNdom(\FUNid{X})$.
    $(\FUNid{A} \FUNrest X)(a)
      \eq \FUNid{A}(a)
      \eq a
      \eq \FUNid{X}(a)$
    for all $a \SETin X$.
    Hence $\FUNid{A} \FUNrest X \eq \FUNid{X}$.
  \end{proof}

  \begin{proposition}[forthel,id=FOUNDATIONS_06_6866147389472768]
    Let $A, B, C, D$ be classes and $f \FUNfromto{A}{B}$ and $g \FUNfromto{B}{C}$ and $h \FUNfromto{C}{D}$.
    Then $h \FUNcomp (g \FUNcomp f) \eq (h \FUNcomp g) \FUNcomp f$.
  \end{proposition}
  \begin{proof}[forthel]
    $h \FUNcomp (g \FUNcomp f)$ and $(h \FUNcomp g) \FUNcomp f$ are maps from $A$ to $D$.

    Let us show that $(h \FUNcomp (g \FUNcomp f))(a) \eq ((h \FUNcomp g) \FUNcomp f)(a)$ for all $a \SETin A$.
      Let $a \SETin A$.
      Then $(h \FUNcomp (g \FUNcomp f))(a)
        \eq h((g \FUNcomp f)(a))
        \eq h(g(f(a)))
        \eq (h \FUNcomp g)(f(a))
        \eq ((h \FUNcomp g) \FUNcomp f)(a)$.
    End.

    Hence $h \FUNcomp (g \FUNcomp f) \eq (h \FUNcomp g) \FUNcomp f$.
  \end{proof}
\end{sfragment}

\begin{sfragment}{Classes of Functions}
  \begin{definition}[forthel,id=FOUNDATIONS_06_5119110467813376]
    Let $A, B$ be classes.
    $\emph{\FUNfunspace{A}{B}}$ is the class of all functions from $A$ to $B$.
  \end{definition}
\end{sfragment}

\begin{sfragment}{Fixed Points}
  \begin{definition}[forthel,id=FOUNDATIONS_06_2177076576649216]
    Let $f$ be a map.
    A \emph{fixed point of $f$} is an element $x$ of $\FUNdom(f)$ such that $f(x) \eq x$.
  \end{definition}
\end{sfragment}
\end{smodule}
\end{document}
