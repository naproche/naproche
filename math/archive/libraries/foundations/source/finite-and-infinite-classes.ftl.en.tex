\documentclass{stex}
\libusepackage{naproche}
\libinput{preamble}
\begin{document}
\begin{smodule}{finite-and-infinite-classes.ftl}
\importmodule[libraries/foundations]{segments-of-natural-numbers.ftl}
\importmodule[libraries/foundations]{equinumerosity.ftl}
\symdecl*{finite}
\symdecl*{infinite}

\begin{sfragment}{Finite Classes}
  \begin{definition}[forthel]
    Let $X$ be a class and $n$ be a natural number.
    $X$ \emph{has $n$ elements} iff $X$ is equinumerous to $\NATsegment{\NATone}{n}$.
  \end{definition}

  \begin{definition}[forthel,for=finite]
    Let $X$ be a class.
    $X$ is \emph{finite} iff there exists a natural number $n$ such that $X$ has $n$ elements.
  \end{definition}

  \begin{proposition}[forthel]
    Let $X, Y$ be classes.
    If $X$ is finite and $Y$ is equinumerous to $X$ then $Y$ is finite.
  \end{proposition}
  \begin{proof}[forthel]
    Assume that $X$ is finite and $Y$ is equinumerous to $X$.
    Take a natural number $n$ and a bijection $f$ between $\NATsegment{\NATone}{n}$ and $X$ and a bijection $g$ between $X$ and $Y$.
    Then $g \FUNcomp f$ is a bijection between $\NATsegment{\NATone}{n}$ and $Y$ (by \sn{bijectivity of composition of bijections}).
    Indeed $X, Y$ are classes.
    Hence $Y$ is finite.
  \end{proof}

  \begin{proposition}[forthel]
    Let $X$ be a class.
    $X$ has zero elements iff $X \Eq \SETempty$.
  \end{proposition}

  \begin{proposition}[forthel]
    Let $X$ be a class.
    $X$ has one element iff $X \Eq \SETsingleton{a}$ for some object $a$.
  \end{proposition}
  \begin{proof}[forthel]
    \begin{case}{$X$ has one element.}
      Take a bijection $f$ between $\NATsegment{\NATone}{\NATone}$ and $X$.
      We have $\NATsegment{\NATone}{\NATone} \Eq \SETsingleton{\NATone}$.
      Hence $X \Eq \SETsingleton{f(\NATone)}$.
    \end{case}

    \begin{case}{$X \Eq \SETsingleton{a}$ for some object $a$.}
      Consider an object $a$ such that $X \Eq \SETsingleton{a}$.
      Define $f(x) = \NATone$ for $x \in \SETsingleton{a}$.
      Then $f$ is a bijection between $\SETsingleton{a}$ and $\NATsegment{\NATone}{\NATone}$.
    \end{case}
  \end{proof}

  \begin{proposition}[forthel]
    Let $X$ be a class.
    $X$ has two elements iff $X \Eq \SETpair{a}{b}$ for some distinct objects $a, b$.
  \end{proposition}
  \begin{proof}[forthel]
    \begin{case}{$X$ has two elements.}
      Take a bijection $f$ between $\NATsegment{\NATone}{\NATtwo}$ and $X$.
      We have $\NATsegment{\NATone}{\NATtwo} \Eq \SETpair{\NATone}{\NATtwo}$.
      Hence $X \Eq \SETpair{f(\NATone)}{f(\NATtwo)}$.
      We have $f(\NATone) \NotEq f(\NATtwo)$.
    \end{case}

    \begin{case}{$X \Eq \SETpair{a}{b}$ for some distinct objects $a, b$.}
      Consider distinct objects $a, b$ such that $X \Eq \SETpair{a}{b}$.
      Define \[f(x) =
        \begin{cases}
          \NATone & : x \Eq a \\
          \NATtwo & : x \Eq b
        \end{cases}\]
      for $x \in \SETpair{a}{b}$.
      Then $f$ is a bijection between $\SETpair{a}{b}$ and $\NATsegment{\NATone}{\NATtwo}$.
      Indeed $f$ is injective and surjective onto $\NATsegment{\NATone}{\NATtwo}$.
    \end{case}
  \end{proof}

  \begin{proposition}[forthel]
    Let $n$ be a natural number and $X$ be a class that has $n$ elements and $a$ be an object such that $a \NotElem X$.
    Then $X \SETunion \SETsingleton{a}$ has $n \NATplus \NATone$ elements.
  \end{proposition}
  \begin{proof}[forthel]
    Take a bijection $f$ between $X$ and $\NATsegment{\NATone}{n}$.
    Define \[g(x) =
      \begin{cases}
        f(x)  & : x \Elem X \\
        n \NATplus \NATone & : x \Eq a
      \end{cases}\]
    for $x \in X \SETunion \SETsingleton{a}$.

    (1) $g$ is a map from $X \SETunion \SETsingleton{a}$ to $\NATsegment{\NATone}{n \NATplus \NATone}$.
    Indeed we can show that $g(x) \Elem \NATsegment{\NATone}{n \NATplus \NATone}$ for all $x \Elem X \SETunion \SETsingleton{a}$.
      Let $x \Elem X \SETunion \SETsingleton{a}$.
      If $x \Elem X$ then $g(x) \Elem \NATsegment{\NATone}{n}$.
      If $x \Eq a$ then $g(x) \Eq n \NATplus \NATone$.
    End.

    (2) $g$ is injective.
    \begin{proof}
      Let $x, y \Elem \Dom(g)$.
      Assume $x \NotEq y$.
      
      \begin{case}{$x, y \Elem X$.} \end{case}

      \begin{case}{$x \Elem X$ and $y \Eq a$.} \end{case}

      \begin{case}{$x \Eq a$ and $y \Elem X$.} \end{case}
    \end{proof}

    (3) $g$ is surjective onto $\NATsegment{\NATone}{n \NATplus \NATone}$.
    Indeed we can show that for every $k \Elem \NATsegment{\NATone}{n \NATplus \NATone}$ there exists an $x \Elem \Dom(g)$ such that $k \Eq g(x)$.
    \begin{proof}
      Let $k \Elem \NATsegment{\NATone}{n \NATplus \NATone}$.

      \begin{case}{$k \NATleq n$.}
        Then $k \Elem \NATsegment{\NATone}{n}$.
        Hence we can take a $x \Elem X$ such that $k \Eq f(x)$.
      \end{case}

      \begin{case}{$k \Eq n \NATplus \NATone$.}
        Then $k \Eq g(a)$.
      \end{case}
    \end{proof}

    Hence $g$ is a bijection between $X \SETunion \SETsingleton{a}$ and $\NATsegment{\NATone}{n \NATplus \NATone}$.
  \end{proof}
\end{sfragment}

\begin{sfragment}{Infinite Classes}
  \begin{definition}[forthel,for=infinite]
    Let $X$ be a class.
    $X$ is \emph{infinite} iff $X$ is not finite.
  \end{definition}

  \begin{proposition}[forthel]
    Let $X, Y$ be classes.
    If $X$ is infinite and $Y$ is equinumerous to $X$ then $Y$ is infinite.
  \end{proposition}
  \begin{proof}[forthel]
    Assume that $Y$ is equinumerous to $X$.
    If $Y$ is finite then $X$ is finite.
    Hence if $X$ is infinite then $Y$ is infinite.
  \end{proof}
\end{sfragment}
\end{smodule}
\end{document}
