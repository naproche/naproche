\documentclass{stex}
\libinput{preamble}
\begin{document}
\begin{smodule}{complete-lattice}
  \importmodule{lattice.ftl?lattice}

  \STEXexport{
    \let\Join\relax
    
    \newcommand\Join[1]{\csname#1\endcsname{clJoin}}
    \newcommand\Meet[1]{\csname#1\endcsname{clMeet}}
    \newcommand\greatest[1]{\csname#1\endcsname{clgreatest}}
    \newcommand\least[1]{\csname#1\endcsname{clleast}}
  }

  \begin{extstructure}{complattice}[complete lattice]{lattice}
    \symdef{clJoin}[op=\bigvee]{\bigvee\,}
    \symdef{clMeet}[op=\bigwedge]{\bigwedge\,}
    \symdef{clgreatest}{\top}
    \symdef{clleast}{\bot}
  \end{extstructure}

  \vardef{Lvarx}[return={\complattice[comp=##1]}]{\mathcal L}
  \newcommand\Lvar[1]{\ifthenelse{\isempty{#1}}{\Lvarx{}[puniv,pleq,clJoin,clMeet]}{\Lvarx{#1}}}

  \section{Complete Lattices}

  \begin{forthel}
    [readtex \path{domain-theory/source/lattice.ftl.tex}]
  \end{forthel}
  
  \begin{forthel}
    \begin{signature}
      A \emph{complete lattice} is a lattice.
    \end{signature}

    Let $\Lvar{}$ denote a complete lattice.
  \end{forthel}
  
  \subsection{Joins and Meets}

  \subsubsection{Joins}
  
  \begin{forthel}
    \begin{signature}
      Let $A \subseteq \univ{Lvar}$.
      $\Join{Lvar} A$ is a join of $A$ in $\Lvar{}$.
    \end{signature}
    
    \begin{proposition}
      Let $x \in \univ{Lvar}$.
      $\Join{Lvar} \set{x} = x$.
    \end{proposition}
    
    \begin{proposition}
      Let $x, y \in \univ{Lvar}$.
      $\Join{Lvar} \set{x,y} = x \join{Lvar} y$.
    \end{proposition}
  \end{forthel}

  \subsubsection{Meets}

  \begin{forthel}
    \begin{signature}
      Let $A \subseteq \univ{Lvar}$.
      $\Meet{Lvar} A$ is a meet of $A$ in $\Lvar{}$.
    \end{signature}
    
    \begin{proposition}
      Let $x \in \univ{Lvar}$.
      $\Meet{Lvar} \set{x} = x$.
    \end{proposition}
    
    \begin{proposition}
      Let $x, y \in \univ{Lvar}$.
      $\Meet{Lvar} \set{x,y} = x \meet{Lvar} y$.
    \end{proposition}
  \end{forthel}

  \subsection{Greatest and Least Elements}

  \subsubsection{Greatest Elements}

  \begin{forthel}
    \begin{definition}
      $\greatest{Lvar} = \Join{Lvar} \univ{Lvar}$.
    \end{definition}

    \begin{proposition}
      $\greatest{Lvar} = \Meet{Lvar} \emptyset$.
    \end{proposition}

    \begin{proposition}
      $\greatest{Lvar}$ is a greatest element of $\Lvar{}$.
    \end{proposition}
  \end{forthel}

  \subsubsection{Least Elements}

  \begin{forthel}
    \begin{definition}
      $\least{Lvar} = \Join{Lvar} \emptyset$.
    \end{definition}

    \begin{proposition}
      $\least{Lvar} = \Meet{Lvar} \univ{Lvar}$.
    \end{proposition}

    \begin{proposition}
      $\least{Lvar}$ is a least element of $\Lvar{}$.
    \end{proposition}
  \end{forthel}
\end{smodule}
\end{document}
