\documentclass{stex}
\libinput{preamble}
\begin{document}
\begin{smodule}{lattice}
  \importmodule{poset.ftl?poset}

  \STEXexport{
    \newcommand\join[1]{\csname#1\endcsname{ljoin}}
    \newcommand\meet[1]{\csname#1\endcsname{lmeet}}
  }

  \begin{extstructure}{lattice}{poset}
    \symdef{ljoin}[op=\vee]{\,\vee\,}
    \symdef{lmeet}[op=\wedge]{\,\wedge\,}
  \end{extstructure}

  \vardef{Lvarx}[return={\lattice[comp=##1]}]{\mathcal L}
  \newcommand\Lvar[1]{\ifthenelse{\isempty{#1}}{\Lvarx{}[puniv,pleq,ljoin,lmeet]}{\Lvarx{#1}}}

  \section{Lattices}

  \begin{forthel}
    [readtex \path{domain-theory/source/poset.ftl.tex}]
  \end{forthel}
  
  \begin{forthel}
    \begin{signature}
      A \emph{lattice} is a poset.
    \end{signature}

    Let $\Lvar{}$ denote a lattice.
  \end{forthel}
  
  \subsection{Joins and Meets}
  
  \begin{forthel}
    \begin{signature}
      Let $x, y \in \univ{Lvar}$.
      $x \join{Lvar} y$ is a join of $x$ and $y$ in $\Lvar{}$.
    \end{signature}

    \begin{signature}
      Let $x, y \in \univ{Lvar}$.
      $x \meet{Lvar} y$ is a meet of $x$ and $y$ in $\Lvar{}$.
    \end{signature}
  \end{forthel}

  \subsection{Properties of Joins and Meets}

  \begin{forthel}
    \begin{proposition}
      Let $x \in \univ{Lvar}$.
      $x \join{Lvar} x = x$.
    \end{proposition}

    \begin{proposition}
      Let $x \in \univ{Lvar}$.
      $x \meet{Lvar} x = x$.
    \end{proposition}

    \begin{proposition}
      Let $x, y \in \univ{Lvar}$.
      $x \join{Lvar} (x \meet{Lvar} y) = x$.
    \end{proposition}

    \begin{proposition}
      Let $x, y \in \univ{Lvar}$.
      $x \meet{Lvar} (x \join{Lvar} y) = x$.
    \end{proposition}

    \begin{proposition}
      Let $x, y \in \univ{Lvar}$.
      $x \leq{Lvar} y$ iff $x = x \meet{Lvar} y$.
    \end{proposition}

    \begin{proposition}
      Let $x, y \in \univ{Lvar}$.
      $x \leq{Lvar}y$ iff $y = x \join{Lvar} y$.
    \end{proposition}
  \end{forthel}
\end{smodule}
\end{document}
