\documentclass[10pt]{article}
\usepackage[english]{babel}
\usepackage{../../../meta-inf/lib/naproche}
\input{../../lib/libraries}
\input{../../lib/foundations}
\input{../../lib/arithmetics}
\begin{document}
  \begin{imports}
    \begin{forthel}
      %[prove off][check off]
      [read \path{libraries/source/foundations/systems-of-sets.ftl.tex}]
      [read \path{libraries/source/foundations/finite-and-infinite-classes.ftl.tex}]
      %[prove on][check on]
    \end{forthel}
  \end{imports}


  \section*{Closure Under Finite Unions}

  \begin{forthel}
    \begin{definition}[id=FOUNDATIONS_14_7040118193913856,printid]
      Let $X$ be a system of sets.
      $X$ is closed under finite unions iff $\bigcup U \in X$ for every nonempty finite subclass $U$ of $X$.
    \end{definition}
  \end{forthel}

  \begin{forthel}
    \begin{proposition}[id=FOUNDATIONS_17_4164024962908160,printid]
      Let $X$ be a system of sets.
      $X$ is closed under finite unions iff $U \cup V \in X$ for every $U, V \in X$.
    \end{proposition}
    \begin{proof}
      Case $X$ is closed under finite unions.
        Let $U, V \in X$.
        Then $\set{U, V}$ is a nonempty finite subclass of $X$.
        Hence $U \cup V = \bigcup \set{U, V} \in X$.
      End.
  
      Case $U \cup V \in X$ for every $U, V \in X$.
        Define $\Phi = \{ n \in \Nat \mid \bigcup U \in X$ for every nonempty subclass $U$ of $X$ that has $n$ elements $\}$.
  
        (1) $\Phi$ contains $0$.
  
        (2) For every $n \in \Phi$ we have $n + 1 \in \Phi$. \\
        Proof.
          Let $n \in \Phi$.
          Then $\bigcup U \in X$ for every nonempty subclass $U$ of $X$ that has $n$ elements.
  
          Let us show that $\bigcup U \in X$ for every nonempty subclass $U$ of $X$ that has $n + 1$ elements.
  
            Case $n = 0$. Obvious.
  
            Case $n \neq 0$.
              Let $U$ be a nonempty subclass of $X$ such that $U$ has $n + 1$ elements.
              Take a bijection $f$ between $\{1, \dots, n + 1 \}$ and $U$.
              We have $\{ 1, \dots, n + 1 \} = \{ 1, \dots, n \} \cup \set{n + 1}$.
              Take $V = f[\{ 1, \dots, n \}]$.
              We have $\{ 1, \dots, n \} \subseteq \{ 1, \dots, n + 1 \}$.
  
              Let us show that $V \subseteq U$.
                Let $x \in V$.
                Take $k \in \{ 1, \dots, n \}$ such that $x = f(k)$.
                Indeed we can show that there exists a $k \in \{ 1, \dots, n \}$ such that $x = f(k)$.
                  Assume the contrary.
                  Then $x \neq f(k)$ for all $k \in \{ 1, \dots, n \}$.
                  Hence $x \notin f[\{ 1, \dots, n \}] = V$.
                  Contradiction.
                End.
                Hence $x \in U$.
                Indeed $x \in f[\{ 1, \dots, n + 1 \}]$.
              End.

              $V$ is nonempty.
              Indeed $f(1) \in f[\{ 1, \dots, n \}]$.
              Indeed $1 \in \{ 1, \dots, n \}$.
              Hence $f \restriction \{ 1, \dots, n \}$ is a bijection between $\{ 1, \dots, n \}$ and $V$ (by \cref{FOUNDATIONS_08_647446231252992}).
              Thus $V$ has $n$ elements.
              Consequently $\bigcup V \in X$.

              Let us show that $U = V \cup \set{f(n + 1)}$. \\
                (1) $f[A \cup B] = f[A] \cup f[B]$ for all $A, B \subseteq \dom(f)$.

                (2) $f[\set{a}] = \set{f(a)}$ for all $a \in \dom(f)$.

                Hence $U
                  = f[\dom(f)]
                  = f[\{ 1, \dots, n + 1 \}]
                  = f[\{ 1, \dots, n \} \cup \set{n + 1}]
                  = f[\{ 1, \dots, n \}] \cup f[\set{n + 1}]
                  = f[\{ 1, \dots, n \}] \cup \set{f(n + 1)}
                  = V \cup \set{f(n + 1)}$.
                Indeed $n + 1 \in \dom(f)$ and $\{ 1, \dots, n \}, \set{1 + n} \subseteq \dom(f)$.
              End.
  
              Let us show that $\bigcup (A \cup B) = (\bigcup A) \cup (\bigcup B)$ for any nonempty systems of sets $A, B$.
                Let $A, B$ be nonempty systems of sets.
                $\bigcup (A \cup B) \subseteq (\bigcup A) \cup (\bigcup B)$.
                $((\bigcup A) \cup (\bigcup B)) \subseteq \bigcup (A \cup B)$. %!
              End.
  
              Let us show that $f(n + 1)$ and $f(k)$ are sets for every $k \in \{ 1, \dots, n \}$.
                Let $k \in \{ 1, \dots, n \}$.
                Then $f(k), f(n + 1) \in U$.
                Hence $f(k)$ and $f(n + 1)$ are sets.
              End.

              Hence $V$ and $\set{f(n + 1)}$ are nonempty systems of sets.
              Thus $\bigcup U
                = \bigcup (V \cup \set{f(n + 1)})
                = (\bigcup V) \cup (\bigcup \set{f(n + 1)})
                = (\bigcup V) \cup f(n + 1)
                \in X$.
            End.
          End.
        Qed.

        Therefore $\Phi$ contains every natural number (by \printref{ARITHMETIC_01_4764664342773760}).
        Thus $\bigcup U \in X$ for every nonempty finite subclass $U$ of $X$.
        Consequently $X$ is closed under finite unions.
      End.
    \end{proof}
  \end{forthel}
\end{document}
